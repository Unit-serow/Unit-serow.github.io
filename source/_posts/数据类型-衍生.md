---
title: 数据类型-衍生
date: 2020-03-30 08:14:17
tags: [C,随笔]
categories: [软件,C/C++]
---

<center><strong>数据类型-结构&共用&位域</strong></center>

<!-- more -->

### 数据类型-衍生

* C 基础的最后补充
> 对于数据类型的最终补充

* 还有一些基本的概念
> 比如枚举，递归(嵌套)

---

## 结构体&共用体&枚举&位域

###  结构体

* C 数组允许定义可存储相同类型数据项的变量
> 结构是 C 中另一种用户自定义的可用的数据类型
> 它常用于存储不同类型的数据项

**关于定义**

* 使用struct语句，语句结构如下:
```

struct tag { 
    member-list
    member-list 
    member-list  
    ...
} variable-list ;
```

* tag是结构体的内存地址标识符(标签)
> menmber-list是标准变量的定义，例如int i，或者其它有效的变量定义
> variable-list结构变量，定义在结构的末尾，最后一个分号之前
> 结构变量可以被指定多个

* 还有一个规律就是，在一般情况下，tag，member-list，variable-list这三部分必须至少出现两个部分
> 如果两个结构体互相包含，则需要对其中一个结构体进行不完整声明，即为任何被递归的结构体必须是存在的

* 结构体当中的变量是可以进行初始化的，这点与其它类型的变量是一样的

* 访问结构体成员需要使用成员访问运算符(.)
> 成员访问运算符是结构变量名称和需要访问的结构成员之间的一个句号
> 使用struct关键字来定义结构体类型的变量

* 结构体是可以作为函数参数的，即函数参数之间的结构体
> 其传值方式，逻辑与规则与其它类型的变量或指针类似

* 指针可以指向结构体
> 指向结构的指针，其方式与定义指向其它变量类型的指针类似
> 有如: `struct tag_name *strict_xxx;`
> 当指定完规则之后就可以使用指针变量来访问内存中存储结构变量的地址了
> 为了查找结构变量的地址，必须把&运算符放在结构名称的前面
> 有如: `status_xxx = &tag_name;`
> 为了使用指向该结构的指针访问结构之间的成员，必须使用->运算符
> 有如: `struct_xxx -> yyy;`

---

### 位域

* C 中的一种数据结构，还可将其称之为位域或位段
> 所谓的位域就是把一个字节中的二进位划分为几个不同的位域，并说明每个区域的位数
> 每个域有一个域名，允许在程序中按域名进行操作

* 可以把几个不同的对象用一个字节的二进制位域来表示
> 位域的定义域结的定义相仿，其语法结构为:
```
struct 位域结构名 
{

 位域列表

};
```
* 其中位域列表的形式为：
> `类型说明符 位域名: 位域长度 `

* 例如:
```struct bs{
    int a:8;
    int b:2;
    int c:6;
}data;
```

**有关位域的使用:**

* 位域的使用和结构成员的使用相同，其一般形式为:
> `位域变量名.位域名`
> `位域变量名->位域名`

* 位域允许用各种格式输出

---

**有关递归的概念:**

* 递归就是在一种数据结构的类型内调用另一种数据结构的类型
> 这种逻辑关系可以一直的持续下去
> 只要有一层逻辑关系进行了递归，这部分代码块的结构就可以称之为递归结构

---

### 共用体

* 共用体是一种特殊的数据类型
> 其作用是允许在相同的内存位置内存储不同的数据类型
> 可以定义一个带有多个成员的共用体，但是有时候只能有一个成员带有值
> 共用体的意义是提供了一种使用相同内存位置的有效方式

* 关于共用体的定义:
>义共用体只能使用union语句，方式与定义结构类似
> union语句定义了一个新的数据类型，带有多个成员，其格式如下:

```
union [union tag]
{
   member definition;
   member definition;
   ...
   member definition;
} [one or more union variables];
```

* union tag是可选的，每个member definition是标准的变量定义
> 比如int i;或者float f;或者其他有效的变量定义
* 在共用体定义的末尾，最后一个分号之前是可以指定一个或多个共用体变量的
> 这个是可选的

* 下面定义一个名为Data的共用体类型
> 有三个成员i，f和str:

```
union Data
{
   int i;
   float f;
   char  str[20];
} data;
```

* 现在，Data类型的变量可以存储一个整数，一个浮点数，或者一个字符串
> 这意味着一个变量(相同的内存位置)可以存储多个多种类型的数据
> 此时可以根据需要在一个共用体内使用任何内置的或者用户自定义的数据类型

**有关对于共用体成员的访问:**

* 为了访问共用体成员，必须使用成员访问运算符(.)
> 成员访问运算符是共用体变量名称和被访问的共用体成员之间的一个句号
> 可以使用union关键字来定义共用体类型的变量

---

### 枚举类型

* 是一种基本的数据类型

* 枚举语法定义格式为:
> `enum 枚举名 {枚举元素1,枚举元素2,……};`

**关于枚举类型的定义:**

如上所示，枚举类型必须由enum关键字来定义

* 比如将如下代码替换成枚举类型:

```
#define MON 1
#define TUE 2
#define WED 3
#define THU 4
#define FRI 5
#define SAT 6
#define SUN 7
```

* 枚举形式:

```
enum DAY
{
      MON=1, TUE, WED, THU, FRI, SAT, SUN
};
```

**有关枚举的性质与对其的声明规则:**

* 枚举对于值的传递规则是线性递增的

* 比如，当第一个枚举成员的默认值为整形的0，则后续的枚举成员的值都将逐渐递增，则为依次加1

* 还可以在定义枚举类型时就改变枚举元素中的值，即为给枚举内元素赋值
> 有如: `enum season {spring, summer=3, autumn, winter};`
> 没有指定值的枚举元素，其值为前一元素加 1
> 也就说 spring 的值为 0，summer 的值为 3，autumn 的值为 4，winter 的值为 5

**有关枚举变量的具体定义:**

上面所说明的内容只是如何去声明枚举类型，这里的内容是如何去定义枚举变量

* 有如下的三种方法:

1. 先定义枚举类型，再去定义枚举变量

```
enum DAY
{
      MON=1, TUE, WED, THU, FRI, SAT, SUN
};
enum DAY day;
```

2. 定义枚举类型的同时定义枚举变量

```
enum DAY
{
      MON=1, TUE, WED, THU, FRI, SAT, SUN
} day;
```

3. 省略枚举名称，直接定义枚举变量

```
enum
{
      MON=1, TUE, WED, THU, FRI, SAT, SUN
} day;
```

* 还可以将任意的数据类型集合转化为固定的枚举类型

---

## 其它内容

* C 数据类型归纳
> 数据类型系统
> 变量类型
> 常量类型
> 数组类型
> 指针类型
> 结构体类型
> 共用体类型
> 函数类型

* C 概念类型
> 存储类
> 作用域
> 枚举
> 字符串
> 输入&输出
> 位域
> 判断
> 循环
> 预处理
> 头文件
> 递归
> 异常
> 内存

---

**关于多维数组的概念:**

* 计算机科学内的多维数组与数学内的多维数组的概念基本没有于本质上的区别
> 多维数组与高维集合的概念

* 多维数组-1: {1{1,2{3,4{5,6}}}}
* 多维数组-2: int a[3][4] = {0,1,2,3,4,5,6,...,n};
> 则为拥有三行四列的多维数组
> 还可以在内部用嵌套的括号来表示

```
int a[3][4] = {  
 {0, 1, 2, 3} ,   /*  初始化索引号为 0 的行 */
 {4, 5, 6, 7} ,   /*  初始化索引号为 1 的行 */
 {8, 9, 10, 11}   /*  初始化索引号为 2 的行 */
};
```

* 关于所定义数组的纬度是任意的，但一般情况下只能使用到一维数组和二维数组

---

* 函数内基本是可以拥有和使用任何的数据类型的
> 而指针也是如此，即指向任何的数据类型，包括共用体内的结构体当中的多维数组
> 就是有点复杂

---

* 可能还会进行补充
> 暂时至此

---

**基本概念:**

* 数据
* 内存
* 运算符&表达式&语句
* 数据类型
* 关键字
* 标识符

**衍生概念:**

* 循环
* 控制&分支&跳转
* 字符&字符串
* 输入/输出(I/O)&输入验证
* 函数
* 数组
* 指针
* 存储类别
* 链接
* 内存管理
* 作用域
* 文件&输入/输出
* 结构及其它数据类型
* 枚举
* 位操作&位域
* 共用体
* 预处理器
* 标准库

---

**目录概览:**

1. 数据类型 基本概念
2. 数据类型 算术类型
3. 数据类型 字符&字符串
4. 数据类型 运算符&表达式
5. 数据类型 控制语句&循环语句
6. 数据类型 函数类型
7. 数据类型 数组类型&指针类型
8. 数据类型 结构类型&共用类型

* 一共十章，十二篇博文
> 对于基础的认识与了解
> 至此

---

**任何数据皆拥有数据类型的性质**

* 而任何于计算机之内的任何概念皆为数据
* 即为任何程序皆有数据构成
* 在UNIX中，一切皆文件

---



