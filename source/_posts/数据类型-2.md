---
title: 数据类型-2
date: 2020-03-11 13:15:27
tags: [随笔,C]
categories: [无,concept]
---

<center><strong>存储原理-算术类型-1</strong></center>

<!-- more -->

## 基本数据类型存储原理

* 数据类型系统-基本类型
* 算术类型，其包含了整数类型与浮点类型
* 这里的数值大小以 C 的 C11 标准为例
> C 标准对基本数据类型只规定了允许的最小大小

---

* 常用基本数据类型占用空间(64位机器为例)

1. 整数类型/char: 1个字节
2. 整数类型/int: 4个字节
3. 浮点类型/float: 4个字节
4. 浮点类型/double: 8个字节

* 以 ISO C 标准为例
> 此规定规定int的取值范围最小为`-32768～32767`

---

## 整数存储原理

* 在计算机内的整数与数学一样，即为没有小数部分的实数
* 计算机以二进制数字的模式来存储整数
* 存储的位置即为变量标识符所对应的内存地址，与其指令集所指的CPU寄存器
* 变量的类型决定了变量存储占用的空间，以及如何解释存储的位模式
* 同时还可将其称之为数据类型系统的基本类型部分
* 被归纳于算术类型，包括了整数类型与浮点类型
* 这里以C为例
* C语言中的整数类型可表示不 同的取值范围和正负值，一般情况使用int类型即可，但是为满足特定任务和 机器的要求，还可以选择其他类型
* int类型是有符号整型，即int类型的值必须是整数，可以是正整数，负整数或零
* 一般而言，储存一个int要占用一个 机器字长
* 声明之后便为被声明的若干个int大小的变量赋予名称并分配内存空间
* 可以赋值或初始化变量(initialize)
* 简而言之，声明为变量创建和标记存储空间，并为其指定初始值
* C语言把大多数整型常量视为int类型，但是非 常大的整数除外
* 并且int类型拥有常量概念

**声明执行逻辑图示:**

* 定义并初始化变量:

<img src="/images/整数类型原理图片/数据类型声明-1.png" width="30%" height="30%">


**举例说明:**

* 例如7则以对应的二进制111来存储
> 因此，要在8位字节中储存 该数字，需要把前5位都设置成0，后3位设置成1

**图解说明:**

* 使用二进制编码储存整数7

<img src="/images/整数类型原理图片/整数类型-1.png" width="30%" height="30%">

---

### 关于整数值的范围

**整数类型**

* 下表列出了关于标准整数类型的存储大小和值范围的细节：

|类型|存储大小|值范围|
|:----|:----|:----|
|char|1 字节|-128 到 127 或 0 到 255|
|unsigned char|1 字节|0 到 255|
|signed char|1 字节|-128 到 127|
|int|2 或 4 字节|-32,768 到 32,767 或 -2,147,483,648 到 2,147,483,647|
|unsigned int|2 或 4 字节|0 到 65,535 或 0 到 4,294,967,295|
|short|2 字节|-32,768 到 32,767|
|unsigned short|2 字节|0 到 65,535|
|long|4 字节|-2,147,483,648 到 2,147,483,647|
|unsigned long|4 字节|0 到 4,294,967,295|

* 同时还可以使用sizeof运算符，即表达式sizeof(type)，以获取某个类型或某个变量对象或存储类型在特定硬件平台的准确存储字节大小

**图解说明**

* 注意，各种类型的存储大小与系统位数有关，但目前通用的以64位系统为主
> 以下列出了32位系统与64位系统的存储大小的差别(windows 相同):

<img src="/images/整数类型原理图片/C-32-64.png" width="30%" height="30%">


---

## 浮点类型存储原理

* 在计算机中，浮点数与数学中实数的概念差不多
* 比如`2.75`,`3.16E7`,`7.00`和`2e-8`都是浮点数，即在一个值后面加上一个小数点，该值就成为一个浮点值
* 所以7是整数，`7.00`是浮点数
* e记数法简述: `3.16E7`表示`3.16×10^7`，其中E的作用就是10倍原数的对应指数级单位

* 浮点数和整数的储存方案不同
* 计算机把浮点数分成小数部分和指数部分来表示，而且分开储存这两部分
* 在十进制下，可以把7.0写成 0.7E1，但这里，0.7是小数部分，1是指数部分
* 当然，计算机在内部使用二进制和2的幂进行储存，而不是10的幂

* 整数没有小数部分，浮点数有小数部分
* 且浮点数可以表示的范围比整数大
* 对于一些算术运算(如，两个很大的数相减)，浮点数损失的精度更多

**图示说明:**

* 一个储存浮点数的例子，以浮点格式(十进制)储存π的值

<img src="/images/整数类型原理图片/浮点数类型.png" width="30%" height="30%">


* 因为在任何区间内(如，1.0 到 2.0 之间)都存在无穷多个实数，所以计算机的浮点数不能表示区间内所有的值
* 浮点数通常只是实际值的近似值
* 例如，7.0可能被储存为浮点值6.99999，稍后讨论精度
* 在过去，浮点运算比整数运算慢
* 不过，现在许多CPU都包含浮点处理器，缩小了速度上的差距

---

### 关于浮点值的范围

**浮点类型**

* 下表列出了关于标准浮点类型的存储大小、值范围和精度的细节：

|类型|存储大小|值范围|精度|
|:----|:----|:----|:----|
|float|4 字节|1.2E-38 到 3.4E+38|6 位小数|
|double|8 字节|2.3E-308 到 1.7E+308|15 位小数|
|long double|16 字节|3.4E-4932 到 1.1E+4932|19 位小数|

* 头文件`float.h`定义了宏，在程序中可以使用这些值和其他有关实数二进制表示的细节

---

## C 数据类型转换

* C 语言中如果一个表达式中含有不同类型的常量和变量，在计算时，会将它们自动转换为同一种类型
* 在 C 语言中也可以对数据类型进行强制转换

**自动转换规则:**

1. 浮点数赋给整型，该浮点数小数被舍去；
2. 整数赋给浮点型，数值不变，但是被存储到相应的浮点型变量中； 

* 强制类型转换形式: [(类型说明符) (表达式)]

---

### 关于不同进制的说明:

* 2进制，8进制和16进制

* 以0为前缀用于表示8进制
> 比如十进制转换为8进制则为020
* 以0x或0X为前缀用于表示16进制
> 比如十进制数转为16进制则为0x10或0X10

* 使用不同的进制是为了方便，其可以完全保证不会影响被存储的方式
* 可以使用标识符`%d`，`%o/%x`来分别显示(格式化输出)八进制与十六进制数字
* 而使用标识符`%#o`，`%#x`，`%#X`可以显示各进制的前缀(0，0x和0X)，也就是分别在转换(格式化输出)的说明中假如警号(#)

---

* 整数类型还包括char-字符类型与其它的表示符类型，比如像long，short等等，这里先不做过多赘述
* 字符类型还包括了字符与字符串(String)的概念

---

**图片资料补充:**

* 转义序列(转义标识符)图示:

<img src="/images/整数类型原理图片/转义标识符-1.png" width="30%" height="30%">

* int系列类型的常量写法示例:

<img src="/images/整数类型原理图片/int中的常量写法.png" width="30%" height="30%">

---



