---
title: 数据类型-5
date: 2020-03-12 19:14:12
tags: [随笔,C]
categories: [软件,C/C++]
---

<center><strong>数据类型-语句/控制语句-1</strong></center>

<!-- more -->

## 数据类型-5

* 语句与表达式-1
> C-控制语句/循环-While
> C-控制语句/选择
> 关系运算及其关系运算符
> 条件表达式
> 真与假的概念
> 循环逻辑概念与原理

---

* 通常一门语言应该提供以下三种形式的程序流
> 执行语句序列(即为线性的执行逻辑)
> 如果满足某些条件就进行重复执行的语句序列(循环)
> 通过测试选择执行哪一个语句序列(分支/控制)

---

## C 控制语句-循环

### While循环

* while循环是入口条件循环
> 或称其为while循环是使用入口条件的有条件循环
> 所谓的有条件指的是语句部分的执行取决于测试表达式描述的条件，如(index < 5)
> 该表达式是一个入口条件(entry condition)，因为必须满足条件才能进入循环体
> 如果条件一开始就为假，则绝对不会进入循环体，则跳过循环体代码块

* 可以把下面的伪代码作为while循环的标准格式:
1.利用循环外的语句对循环内的变量进行值传递
2. 获得第1个用于测试的值 (while (循环条件))
3. 当测试为真时
4. 处理值 (根据循环条件)
5. 获取下一个值 scanf()

* 当被输入的值传递进循环并可以保证条件为真时，开始第一轮循环
```
status = scanf("%ld", &num); /* 定义被输入值的变量 */
while (status == 1) /* 定义循环条件 */
{
status = scanf("%ld", &num);  /* 定义循环行为，即接受被输入的值，当接受的值可以满足循环条件时则为真，开始迭代 */
}
```
* 还可以写为
> `while (scanf("%ld", &num) == 1){/* 循环行为 */}`

* while循环的通用形式如下：
```
while ( expression )
statement
```

* 其中statement部分可以是以分号结尾的简单语句，也可以是用花括号括起来的复合语句

* 在大部分的程序内，expression部分都使用关系表达式
> 也就是说，expression是值之间的比较，可以使用任何表达式
> 如果expression为真(或者更一般地说，非零)，则执行statement部分一次，然后再次判断expression
> 在expression为假(0)之前，循环的判断和执行一直重复进行
> 每次循环都被称为一次迭代/循环一轮(iteration)

* while循环结构示意图:

<img src="/images/数据类型-5/C-循环语句-1.png" width="30%" height="30%">

* while循环有一点非常重要: 在构建while循环时，必须让测试表达式的值有变化，表达式最终要为假
> 否则，循环就不会终止(可以使用 break和if语句来终止循环)
 
* 最大正值加一一般 会得到一个负值，类似地，最小负值减一一般会得到最大正值

---

### while的语法要点

* 使用while时，要牢记一点: 只有在测试条件后面的单独语句(简单语句或符合语句)才是循环部分
> while循环语句的格式应为while(){}，而绝非{while()}，陷入无限循环(infinite loop)是最常见的情况

* 还有一点就是，即便while语句本身使用符合语句，while的本质依旧是一条单独的语句(或称为在语句构成上)
> 该语句从while开始执行，到第一个分号结束，在使用复合语句的情况下，到右花括号结束，还需要注意分号的为止，一定要在语句结束时再写分号

* 构成函数的概念只有语句和表达式，一切语句都已分号宣布独立(结束)
> 即便在语句内使用了复合语句，复合语句则皆以右花括号结束

* 在使用while语句时，可以直接将分号写在条件表达式后面，即可以让程序直接进入下一个迭代，因为一个单独的分号被视为一条语句

* 如果在测试条件(条件表达式)的代码后面直接添加单独的分号
> 此分号则代表为一个空语句(null statement)，它什么也不做
> 在 C 中，单独的分号表示空语句，而处理空语句最好的方法是使用continue语句

---


### 关系运算符与表达式

* 用关系运算符和表达式来比较大小
* 以下关于关系表达式与关系运算符的概念在所有的循环类语句概念中都通用，这里的通用泛指计算机上所有的程序语言

* while循环经常依赖测试表达式来作比较，这样的表达式被称之为关系表达式(relational expression)
* 而出现在关系表达式中间的运算符叫做关系运算符(relational operator)

* 以下表图片内列出了 C 的所有关系运算符，同时该表也涵盖了所有的数值关系
* 关系运算符:

<img src="/images/数据类型-5/关系运算符-1.png" width="30%" height="30%">


* PS: 数字之间的关系再复杂也没有人与人之间的关系复杂-来自原书

* 关系运算符常用于构造while语句和其他C语句中用到的关系表达式
> 这些语句都会检查关系表达式为真还是为假

* 所谓关系运算符，存在的意义就是对人为所描述的表达式的值进行确定，确定的结果只有0和1，即真与假
* 而在确定的过程中，最常见的确定方法就是与人为所规定的值进行字符的比较

* 如果要对浮点数进行比较，尽量要去只是用<和>，因为浮点数的舍入误差会导致在逻辑上应该相等的两数却不相等
* 为了避免此类型错误的发生，C 内拥有fabs()函数，该函数声明在math.h头文件中
> 使用该函数可以较为方便的比较浮点数，该函数返回一个浮点的绝对值(即为没有代数符号的值)

---

**fabs()函数使用示范:**

```
#include <stdio.h>
#include <math.h>

int main(void)
{
	const double ANSWER = 3.14159;
	double response;
	printf("What is the value of pi?\n");
	scanf("lf", &response);
	while (fabs(response - ANSWER) > 0.0001)
	{
		printf("Try again!\n");
		scanf("%lf", &response);
	}
	printf("Close enough!\n");
	return 0;
}
```

* 循环会一直提示用户继续输入，除非用户输入的值与正确值之间相差 0.0001：

* 输出结果:
```
What is the value of pi?
3.14
Try again!
3.1416
Close enough!
```

---

### 何为真

* 这是一个古老的问题，但是对C而言还不算难、
* 在C中，表达式一定有 一个值，关系表达式也不例外

* 可以使用并输出两条简单的比较语句，比如说 `true_val=(10>2);`和`false_val(10==2);`，前者为真，后者为假
> 则输出的结果必定是true=1，而false=0

* 所以说，对 C 而言，表达式为真的值为1，表达式为假的值为0
* 当 C 程序的循环结构的判断结果一直为真(即为1)时，则反复且永远进行条件及语句的迭代

* 所以一些C程序使用下面的结构，由于1为真，所以该循环会一直进行
> `while (1){...}`

**关于其它的真值:**

* 在 C 中，所有的非零值都被视为真，只有0被视为假
> 也就是说，只要测试条件的值为非零，就会执行while循环

* 这是从数值方面而不是从真/假方面来看测试条件
> 还有需要进行牢记的一点就是，关系表达式为真，求值得一，关系表达式为假，求值得零
> 因此，这些表达式实际上相当于数值，所以必须要去充分利用测试条件的这一特性
> 比如，用while(goats)替换while(goats !=0)，因为表达式goats !=0和goats都只有在goats的值为0时才为0或假，所以再增加一个不等于(!=)的比较运算符的毫无意义的
> 这里利用了 C 内自动判断真值与假值的性质，或称其为默认值与自然选择

* 在 C 或其它任何一种编程语言内，要尽量的去使用自然选择与缺省值来编译代码，从而使代码更加整洁与美观
* 这个特点既为好处，也为坏处，C 由于对真的约束太少，会带来一些麻烦
> 当循环的条件表达式中没有定义==1，而定义了=1时，此时的条件表达式中的变量的值为一
> 而且，整个赋值表达式的值就是赋值运算符左侧的值，所以变量=1的值也是1，既while(变量=1)实际上就相当于while(1)
> 也就是说，循环不会退出，此时如果人为的输入其它的符号，从而让变量的值归于0，但是循环的测试条件又把改变量重置为1，从而又进入了下一次迭代
> 此时程序中的循环一直运行着，用户在输如符号后完全没有机会输入，如果scanf()读取指定形式的输入失败，就把无法读取的输入留在输入队列中，以供下一次读取
> 当scanf()把输入的符号(这里的符号可以为任何不属于数字的数据类型)作为整数读取失败了，他将会把字符留下
> 在下一次循环时，scanf()从上次读取失败的地方(被输入字符)开始读取，scanf()把该输入的字符再次作为整数读取，然后又失败了
> 以此，就造成了一个无限的循环，而且还是失败的

* 所以这里千万需要注意的一点就是，千万别把关系相等运算符==和赋值运算符=给弄错了

* 因为 C 不允许给常量赋值
> 而且编译器会把赋值运算符的这种用法作为语法错误标记出来
> 可以在构建比较是否相等的表达式时，把常量放在左侧，比如`6 = canoes;`

* 好在计算机察觉不出来，因为对计算机而言，无限地执行这些愚蠢的指令比成功预测未来10年的股市行情没什么两样-来自原文

* 总之，关系运算符用于构成关系表达式
> 关系表达式为真时值为1，为假时值为0
> 通常用关系表达式作为测试条件的语句(如while和if)可以使用任何表达式作为测试条件
> 即非零为真，零为假

* 以类似于`while (条件表达式)`这样的格式为变量进行命名可以让while循环的测试变得简单易懂

---

### `_Bool`类型

* 在 C 中，一直用int类型的变量表示真/假值
* C99专门针对这种类型 的变量新增了`_Bool`类型
> 该类型是以英国数学家George Boole的名字命名 的，他开发了用代数表示逻辑和解决逻辑问题
> 在编程中，表示真或假的变量被称为布尔变量(Boolean variable)，所以`_Bool`是 C 中布尔变量的类型名
> 其中`_Bool`类型的变量只能储存1(真)或0(假)
> 如果把其他非零数值赋给`_Bool`类型的变量，该变量会被设置为1
> 这反映了C把所有的非零值都视为真
> 给布尔变量取一个能表示真或假值的变量名是一种常见的做法

* C99提供了`stdbool.h`头文件，该头文件让`bool`成为`_Bool`的别名
> 而且还把true和false分别定义为1和0的符号常量
> 包含该头文件后，写出的代码可以与C++兼容
> 因为C++把bool，true和false定义为关键字
> 如果系统不支持`_Bool`类型，导致无法运行该程序
> 可以把`_Bool`替换成 int即可

---

### 优先级和关系运算符

* 关系运算符的优先级比算术运算符(包括+和-)要更低，而比赋值运算符要高

* 关系运算符之间有两种不同的优先级。
> 高优先级组: <<= >>=
> 低优先级组: == !=

* 与其他大多数运算符一样，关系运算符的结合律也是从左往右

* 以下图片列表列出了常用的关系运算符优先级关系，具体可以参考-[C 运算符]，其中列出了全部运算符的完整优先级列表

* 运算符优先级:

<img src="/images/数据类型-5/C-关系运算符优先级-1.png" width="30%" height="30%">

---

### 关于不确定循环和计数循环

* 一些while循环是不确定循环(indefinite loop)
> 所谓不确定循环，指 在测试表达式为假之前，预先不知道要执行多少次循环
* 还有一类是计数循环(counting loop)
> 这类循环在执行循环之前就知道要重复执行多少次

* 在创建一个重复执行固定次数的循环中涉及了3个行为:
1.必须初始化计数器
2.计数器与有限的值作比较
3.每次循环时递增计数器
* while循环的测试条件执行比较，递增运算符执行递增
> 如果递增发生在循环的末尾，即可以防止不小心漏掉递增
> 因此，这样做比将测试和更新组合放在一起要好，但是计数器的初始化放在循环外，就有可能忘记初始化
> 此时可以用for循环来避免这种情况的发生

---

**其它内容:**

* 赋值运算符 用于将右值赋给左值，而左值通常为变量
* 赋值表达式 
* 关系运算符 用于对左值和右值进行比较
* 条件运算符 

---

### 伪代码(pseudocode)

* 是一种用简单的句子表示程序思路的方法，它与计算机语言的形式相对应
* 伪代码有助于涉及程序的逻辑
* 确定程序的逻辑无误后，再把伪代码翻译成实际的代码
* 使用为伪代码的好处之一是，可以把注意力集中再程序的组织和逻辑上，不用在设计程序时还要分心去想如何用编程语言来表达自己的想法
* 例如可以用缩进来代表一块代码，不用考虑 C 的语法要用花括号把部分代码括起来

---

### 其它理解

---

* 程序按照序列逻辑进行线性执行

* 由主函数mian()开始
> 然后线性执行主函数内所调用的函数和语句
> 而其它的函数也是相同的原理，函数内的任何语句都是根据线性逻辑来逐一执行
> 至于循环语句与控制语句也是由线性逻辑来执行的，即执行完该语句上面的所有语句，再进行对循环或控制语句的执行
> 各种基本数据对象根据逻辑构成语句(数据对象可以包括变量，数组，指针，运算符，关键字或对于其它函数的调用等等)

* 语句构成函数
* 函数构成程序
* 在计算机内，构成任何数据对象的逻辑都是线性的，即逐一执行

---

* 预处理器(对于头文件的处理方法，通常是在程序编译之前就已经将头文件中的内容处理完毕，处理的对象即为对于所指头文件内函数的对应调用)
* 头文件(给当前的程序本身提供外部函数的支持，即对于当前语言标准库的支持)

1. 定义常量
2. 定义全局变量
3. 函数声明

* 主函数`main(){包括了对于其它函数的调用以及线性逻辑执行}`
> 对于其它函数的补充

---

* 声明函数的基本格式为: `void funtion_name (void) {函数内容}`
> 圆括号内所声明的参数可称其为形式参数，即为没有值，但有数据类型的变量数据类型
> 前者的void为函数本身的数据类型，最常用的是整形类型或长整型类型
> 函数的类型用于声明让函数实现的功能模块

* 构成函数的概念只有语句和表达式，一切语句都已分号宣布独立(结束)
> 即便在语句内使用了复合语句，复合语句则皆以右花括号结束

---

* 每个函数或每个花括号都可以被称为是代码块

* 写程序的大体逻辑
1. 先将常量和全局变量声明完毕
2. 进行函数声明
3. 然后先写上主函数
4. 再对函数进行补充，以实现其对应功能
5. 最后再主函数中的内容进行补充(通常就是对已存在的函数进行进行逐一调用)
6. 编译源代码并执行程序

* 在计算机内，一切的执行逻辑都是线性的

---

* 条件表达式与条件语句的本质就是判断值的真假或称其为0或1，用更大的范围去描述则是0与任何实数，即0就是假，或称其为无，其它的任何数都是真，或称其为有
* 无论是循环语句，选择语句还是任何的控制语句(流程控制语句)，它们存在(或称其为存在)的意义都是为了对所选条件表达式的值进行判断，而判断的结果只有两个，即为0与1

* 构成函数的概念只有语句和表达式，一切语句都已分号宣布独立(结束)
> 即便在语句内使用了复合语句，复合语句则皆以右花括号结束

---

* 在 C 或其它任何一种编程语言内，要尽量的去使用自然选择与缺省值来编写代码，从而使代码更加整洁与美观
* 千万不要忘了伪代码的概念，一般的思路梳理就是对所谓伪代码的实现

---



