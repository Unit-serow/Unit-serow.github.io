---
title: RDBMS-KEY-1
date: 2020-02-19 02:56:53
tags: [RDBMS,随笔]
categories: [软件,数据库]
---

### RDBMS-KEY-1(关系键)

* 关系键是关系数据库(关系模型)的重要组成部分
* 关系键是一个表中的一个或几个属性，用来标识该表的每一行或与另一个表产生联系

---

**可大致分为六类**

* 主键
* 超键
* 候选键
* 外键
* 代理键
* 自然键
* 公共键

---

1. 主键

* 主键，又称主码/主关键字(primary key或unique key)
* 数据库表中对储存数据对象予以唯一和完整标识的数据列或属性的组合
* 一个数据表只能有一个主键，且主键的取值不能缺失，即不能为空值(Null)
* 作表的行的唯一标识的候选关键字
* 一个表只能有一个主键
* 主键可以由一个字段，也可以由多个字段组成，分别称为单字段主键或多字段主键
> 并且它可以唯一确定表中的一行数据，或者可以唯一确定一个实体

**primary key和unique key的区别**

1. 作为primary key的域`／`域组不能为Null，而unique key可以
2. 一个表只能有一个primary key，但可有多个unique key
3. 更大的区别在逻辑设计
> primary key一般在逻辑设计中用作记录标识，这也是设置primary key的本意
> 而unique key只是为了保证域／域组的唯一性

**作用:**

1. 保证实体的完整性
2. 加快数据库的操作速度
3. 在表中添加新记录时，ACCESS会自动检查新记录的主键值，不允许该值与其他记录的主键值重复
4. ACCESS自动按主键值的顺序显示表中的记录，如果没有定义主键，则按输入记录的顺序显示表中的记录

---

2. 超键

* 超键，又称超码(superkey)
* 是在数据库关系模式设计中能够唯一标示多元组(即"行")的属性集
* 包含所有属性的集叫做明显(平凡)超键

---

3. 候选键

* 候选键，又称候选码(candidate key)
* 是某个关系变量的一组属性所组成的集合
* 它需要同时满足下列两个条件：
> 1. 这个属性集合始终能够确保在关系中能唯一标识元组
> 2. 在这个属性集合中找不出真子集能够满足条件(1)
* 满足第一个条件的属性集合称为超键
> 因此也可以把候选键定义为"最小超键"，也就是不含有多余属性的超键
* 候选键的重要性是它们能够在关系中唯一标识出不同的元组，因此超键也是在设计数据库模式时需要指定的最重要的约束之一
* 由于在关系模型中，每个关系都是一个集合(没有重复的元素)，所以每个关系都至少有一个候选键(因为所有属性组合必然是个超键)

* 但是在某些关系型数据库中表也能代表多重集，所以在每个关系中都显式地定义至少一个候选键是一条很重要的设计原则
> 数据库管理系统通常都需要将每个关系中的某个候选键定义为主键
> 亦即这个候选键是区分不同元组时首选的识别方式
> 例如外键通常就是引用主键而非其他候选键

---

4. 外键

* 外键，又称外部键/外来键(foreign key)
* 在关系数据库中，每个数据表都是由关系来连系彼此的关系
> 父数据表(Parent Entity)的主键(primary key)会放在另一个数据表，当做属性以创建彼此的关系
> 而这个属性就是外键

* 比如，学生跟老师之间是教学的关系，学生数据表会有个属性叫指导老师(FK)，而这个值就是对应到老师数据表的老师代号(PK)，学生的指导老师就是外键

* 如果公共键在一个关系中是主关键字，那么这个公共键被称为另一个关系的外键
> 由此可见，外键表示了两个关系之间的相关联系
> 以另一个关系的外键作主键的表被称为主表，具有此外键的表被称为主表的从表
> 外键又称作外关键字

**作用:**
* 保持数据一致性，完整性，主要目的是控制存储在外键表中的数据
* 使两张表形成关联，外键只能引用外表中的列的值或使用空值

---

5. 代理键

* 代理键(surrogate key)
* 是在当数据表中的候选键都不适合当主键时，例如数据太长，或是意义层面太多，就会请一个无意义的但唯一的字段来代为作主键

* 代理键是(引用描述):
* 1.`Surrogate (1) – Hall, Owlett and Codd (1976)`
> 一个代理键值确定了外部世界的一个实体，代理键值是数据库生成的，从来不显示给用户或应用程序看
* 2. `Surrogate (2) – Wieringa and De Jonge (1991)`
> 一个代理键值确定了数据库中的一个对象，代理键值是数据库生成的，用户或应用程序看不到它

* 在实践中，代理键值通常是个自动递增的数字
* 例如:
* PostgreSQL用serial
* Oracle用SEQUENCE
* 在MySQL用标记有`AUTO_INCREMENT`的字段

---

6. 自然键

* 自然键(natural key)
* 与代理键相反，是在自然(真实)生活中唯一确定一个事物的标识
* 身份证号(理论上，假设没有因技术原因造成的重复)就是一个自然键，用于准确且绝对的确定一个人

---

7. 公共键

* 公共键，又可称为公共关键字(Common Key)
* 在关系数据库中，关系之间的联系是通过相容或相同的属性或属性组来表示的
> 如果两个关系中具有相容或相同的属性或属性组，那么这个属性或属性组被称为这两个关系的公共键

---
