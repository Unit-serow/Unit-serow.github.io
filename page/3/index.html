<!-- build time:Mon Feb 17 2020 17:28:00 GMT+0800 (中国标准时间) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon32.ico?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="Hexo, NexT"><link rel="alternate" href="/atom.xml" title="UNIT" type="application/atom+xml"><meta property="og:type" content="website"><meta property="og:title" content="UNIT"><meta property="og:url" content="https://unit-serow.github.io/page/3/index.html"><meta property="og:site_name" content="UNIT"><meta property="article:author" content="serow"><meta name="twitter:card" content="summary"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"right",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://unit-serow.github.io/page/3/"><title>UNIT - 不精之精，而至纯粹</title><meta name="generator" content="Hexo 4.2.0"></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-right page-home"><div class="headband"></div><a href="https://github.com/2721304117" target="_blank" rel="noopener"><img width="149" height="149" style="position:absolute;top:0;right:0;border:0" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_white_ffffff.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">UNIT</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">不精之精，而至纯粹</h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://unit-serow.github.io/2020/02/12/SQL-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="serow"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UNIT"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/02/12/SQL-1/" itemprop="url">SQL-1</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-12T16:15:56+08:00">2020-02-12 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="结构化查询语言-SQL-1"><a href="#结构化查询语言-SQL-1" class="headerlink" title="结构化查询语言-SQL-1"></a>结构化查询语言-SQL-1</h3><p><strong>概述:</strong></p><ul><li>全称<code>Structured Query Language</code></li><li>是一种特定目的编程语言，用于管理关系型数据库管理系统(RDBMSR)，或在其中进行流处理</li><li>RDBMS全称<code>Relational Database Management System</code></li><li>SQL是高级的非过程化编程语言</li><li>允许用户在高层数据结构上工作</li><li>SQL同时也是数据库文件格式的扩展名</li><li>SQL基于关系代数和元组关系演算，包括一个数据定义语言和数据操纵语言</li><li>SQL在很大程度上是一种声明式编程(4GL)，但是其也含有过程式编程的元素</li><li>1986年的<code>SQL-86</code>/<code>SQL-87</code>是ANSI对于SQL的首次标准化</li><li>2016年的<code>SQL:2016</code>是现阶段最后一次标准化的更新</li><li>SQL的核心大致可分为DQL,DDL,DML,DCL四大部分</li><li>本篇只进行基本的体系整理与概念认识与理解</li></ul><hr><p><strong>SQL语言内存在要素简述:</strong></p><blockquote><p><code>子句</code>:基本构成条件，语句和查询的组成部分<br><code>语句</code>:由子句等任何其他元素构成的执行逻辑<br><code>查询</code>:基于特定条件检索数据<br><code>谓词</code>:限制语句和查询结果与控制流程<br><code>表达式</code>:用于产生任何标量值，标量值也可由列和行的数据库表构成<br><code>;</code>-<code>分号</code>:语句结束标志(终结符)，为SQL标准所定义<br>空格在SQL语句和查询中会被忽略</p></blockquote><hr><p><strong>SQL总体的构成包含五个部分:</strong></p><ul><li>数据查询语言(Data Query Language，DQL)</li><li>数据定义语言(Data Definition Language，DDL)</li><li>数据操控语言(Data Manipulation Language, DML)</li><li>数据控制语言(Data Control Language, DCL)</li><li>事务控制语言</li></ul><hr><p><strong>SQL语言构成模块简述:</strong></p><ol><li>DDL-数据定义语言</li></ol><ul><li>SQL语言集中负责数据结构定义与数据库对象定义的语言</li><li>主要由<code>CREATE</code>,<code>ALTER</code>,<code>DROP</code>(<code>create</code>,<code>alter</code>,<code>drop</code>)三个语法构成</li><li>SQL指令子的集之一</li></ul><ol start="2"><li>DML-数据操纵语言</li></ol><ul><li>SQL中用于数据库操作，对数据库其中的对象和数据运行访问工作的编程语句</li><li>以<code>INSERT</code>,<code>UPDATE</code>,<code>DELETE</code>(<code>insert</code>,<code>update</code>,<code>delete</code>)作为核心</li><li>分别代表创建，修改，删除</li><li>再加上SQL的<code>SELECT</code>(<code>select</code>查询)语句(属于DQL)</li><li>从而称其为<code>CRUD</code>即为<code>增删改查</code></li><li>SQL指令集的子集之一</li></ul><ol start="3"><li>DCL-数据控制语言</li></ol><ul><li>SQL中可对数据访问权进行控制的指令</li><li>由GRANT和REVOKE两个指令组成</li><li>SQL指令集的子集之一</li></ul><ol start="4"><li>DQL-数据查询语言</li></ol><ul><li>DQL的主要功能是查询数据</li><li>SQL中用于从数据库或信息系统中查询数据的计算机语言</li><li>由<code>SELECT</code>,<code>FROM</code>,<code>WHERE</code>,<code>GROUP BY</code>和<code>ORDER BY</code>这些语法构成</li><li>其核心指令为<code>SELECT</code>(<code>select</code>)</li></ul><hr><p><strong>其他概念:</strong></p><ul><li>语句，子句，关键字，运算符，操作符</li><li>通配符，连接，别名，约束，NULL，数据类型(通用/DB)</li></ul><hr><p><strong>参考:</strong></p><ul><li>SQL标准<a href="https://web.archive.org/web/20100304063252/http://structedtext.appspot.com/db/sql.html" target="_blank" rel="noopener">参考资料/CN</a><blockquote><p><code>https://web.archive.org/web/20100304063252/http://structedtext.appspot.com/db/sql.html</code></p></blockquote></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></div><div></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://unit-serow.github.io/2020/02/12/DBMS-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="serow"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UNIT"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/02/12/DBMS-1/" itemprop="url">DBMS-1</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-12T14:27:10+08:00">2020-02-12 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="DBMS-1"><a href="#DBMS-1" class="headerlink" title="DBMS-1"></a>DBMS-1</h3><p><strong>概述:</strong></p><ul><li>本篇注重对知识体系的规划与系别的整理</li><li>别称:数据库管理系统(Database Management System)</li><li>简称:DBMS</li><li>一个数据库由多个表空间(Tablespace)构成</li><li>用于将数据以一定方式存储到同一个数据库内，能同时予以多个用户共享</li><li>让应用程序的数据集合彼此独立，并且具有尽可能小的冗余度</li><li>数据库管理系统指的是为管理数据库而设计的电脑软件(程序)系统</li><li>大多数具有存储，截取，安全保证，备份等基础功能</li><li>几乎所有的数据库管理系统都配备了一个开放式数据库连接（ODBC）驱动程序，令各个数据库之间得以互相集成</li><li>不涉及结构化查询语言/数据查询语言(SQL)相关内容</li></ul><hr><ul><li>数据库的类别一览</li></ul><table><thead><tr><th align="left">类别</th><th align="left">相关(与其相结合)</th></tr></thead><tbody><tr><td align="left">分布式数据库</td><td align="left">分布处理技术</td></tr><tr><td align="left">并行数据库</td><td align="left">并行处理技术</td></tr><tr><td align="left">演绎数据库</td><td align="left">人工智能</td></tr><tr><td align="left">多媒体数据库</td><td align="left">多媒体技术</td></tr><tr><td align="left">特定领域数据库</td><td align="left">统计/空间/工程/地理数据库等等</td></tr><tr><td align="left">关系型数据库</td><td align="left">MySQL,Oracle,postgreSQL等</td></tr><tr><td align="left">非关系型数据库</td><td align="left">NoSQL/Redis,MongoDB等</td></tr></tbody></table><hr><ul><li>关系型数据库简介<blockquote><p>MySQL<br>MariaDB (MySQL的代替品)<br>Percona Server (MySQL的代替品)<br>PostgreSQL<br>Microsoft Access<br>Microsoft SQL Server<br>Google Fusion Tables<br>FileMaker<br>Oracle数据库<br>Sybase<br>dBASE<br>Clipper<br>FoxPro<br>foshub</p></blockquote></li></ul><hr><ul><li>非关系型数据库(NoSQL)简介</li><li>NoSQL是对不同于传统的关系数据库的数据库管理系统的统称<blockquote><p>BigTable (Google)<br>Cassandra<br>MongoDB<br>CouchDB<br>Redis</p></blockquote></li></ul><hr><ul><li>键值数据库简介<blockquote><p>Apache Cassandra(为Facebook所使用)高度可扩展<br>Dynamo<br>LevelDB(Google)</p></blockquote></li></ul><hr><p><strong>数据库关系模型简述(数据结构):</strong></p><ol><li>对象模型</li></ol><ul><li>层次-层次模型<blockquote><p><code>Hierarchical database model</code><br>轻量级数据访问协议<br>用树形结构描述实体及其之间关系的数据模型</p></blockquote></li></ul><ol start="2"><li><p>网状-网状模型</p><blockquote><p><code>Network model</code><br>用于大型数据储存<br>由美国的<code>查尔斯·巴赫曼(Charles William Bachman)</code>发明</p></blockquote></li><li><p>平面-平面模型</p></li></ol><ul><li><code>Flat-file database</code></li><li>表格模型，一般在形式上是一个二维数组</li><li>如表格模型数据Excel</li><li>不同于平面文件系统<code>Flat file system</code></li></ul><ol start="4"><li><p>关系-关系模型</p><blockquote><p><code>Relational model</code><br>基于谓词逻辑和集合论的一种数据模型</p></blockquote></li><li><p>ER模型-增强实体关系模型</p><blockquote><p><code>Entity-relationship model</code><br>概念数据模型的高层描述所使用的数据模型或模式图</p></blockquote></li><li><p>图-图数据库</p><blockquote><p><code>graph database,GDB</code><br>使用图结构进行语义查询的数据库，它使用节点、边和属性来表示和存储数据<br>该系统的关键概念是图，它直接将存储中的数据项，与数据节点和节点间表示关系的边的集合相关联</p></blockquote></li><li><p>面向对象-面向对象模型</p><blockquote><p>面向对象数据库<br>对象数据库的数据库管理系统被称为<code>ODBMS</code>或<code>OODBMS</code><br>以对象形式表示信息的数据库</p></blockquote></li><li><p>实体-属性-值</p><blockquote><p><code>Entity–attribute–value model,EAV</code><br>EAV也称为对象属性值模型，垂直数据库模型和开放式架构<br>是一种数据模型，以节省空间的方式对实体进行编码，其中可以用来描述实体的属性(属性，参数)的数量可能很大，但是实际适用于给定的实体是相对适度的<br>这样的实体对应于稀疏矩阵的数学概念</p></blockquote></li><li><p>空间/纬度建模</p><blockquote><p><code>Dimensional modeling,DM</code></p></blockquote></li><li><p>半结构化模型</p></li></ol><hr><p><strong>其他模型:</strong></p><ol start="11"><li><p>关联-数据关联模型</p><blockquote><p><code>Associative model of data</code><br>数据的关联模型是一个数据模型的数据库系统</p></blockquote></li><li><p>多维-联机分析处理</p><blockquote><p><code>Online analytical processing,OLAP</code><br>是计算机技术中快速解决多维分析问题(MDA)的一种方法</p></blockquote></li><li><p>数组-矩阵数据库管理系统</p><blockquote><p><code>Array DBMS</code><br><code>Array database management systems</code>(array DBMSs)<br>矩阵数据库管理系统(Array DBMS)专门为矩阵(也称为栅格数据)提供数据库服务</p></blockquote></li><li><p>语义数据模型</p><blockquote><p><code>Semantic data model,SDM</code><br>基于高级语义的数据库描述和数据库的结构形式化(数据库模型)</p></blockquote></li><li><p>星模式</p><blockquote><p><code>Star schema</code><br>在计算中，星形模式是数据集市模式的最简单样式，并且是最广泛用于开发数据仓库和维度数据集市的方法</p></blockquote></li><li><p>XML数据库</p><blockquote><p><code>XML database</code><br>数据持久性软件系统，该系统允许数据被指定，有时存储在XML格式</p></blockquote></li></ol><p><strong>关于实现方法这里不做阐述</strong></p><hr><p><strong>架构:</strong></p><ul><li>数据库的架构可以大致区分为三个概括层次:内层,概念层和外层<blockquote><p>内层:最接近实际存储体，亦即有关数据的实际存储方式<br>外层:最接近用户，即有关个别用户观看数据的方式<br>概念层:介于两者之间的间接层</p></blockquote></li></ul><hr><p><strong>数据库事务</strong></p><ul><li>事务(transaction)包含一组数据库操作的逻辑工作单元，在事务中包含的数据库操作是不可分割的整体</li><li>这些操作要么一起做，要么一起回滚(Roll Back)到执行前的状态</li><li>事务的ACID特性：<blockquote><p>基元性 (atomicity)<br>一致性 (consistency)<br>隔离性 (isolation)<br>持续性 (durability)</p></blockquote></li><li>事务的并发性是指多个事务的并行操作轮流交叉运行，事务的并发可能会访问和存储不正确的数据，破坏交易的隔离性和数据库的一致性</li></ul><hr><ul><li>网状模型-网状数据模型的数据结构</li><li>满足下面两个条件的基本层次联系的集合为网状模型</li></ul><ol><li>允许一个以上的结点无双亲</li><li>一个结点可以有多于一个的双亲</li></ol><hr><p><strong>其他:</strong></p><ul><li><p>数据库管理系统是指管理数据库的程序</p></li><li><p>相关概念简述:</p><blockquote><p>数据库存储结构(Database storage structures)<br>数据模型(data model)<br>数据库模型(database model)<br>关系模型(Relational model)<br>数据结构(data structure)<br>数据类型</p></blockquote></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></div><div></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://unit-serow.github.io/2020/02/12/%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="serow"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UNIT"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/02/12/%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0-1/" itemprop="url">协议概述-1</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-12T02:45:34+08:00">2020-02-12 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="协议概述-1"><a href="#协议概述-1" class="headerlink" title="协议概述-1"></a>协议概述-1</h1><h3 id="TLS-Transport-Layer-Security"><a href="#TLS-Transport-Layer-Security" class="headerlink" title="TLS(Transport Layer Security)"></a>TLS(Transport Layer Security)</h3><p><strong>传输层安全协议</strong></p><p><strong>概要:</strong></p><ul><li>传输层协议</li><li>互联网上保密通信的工业标准协议</li><li>目的是为互联网通信提供安全及数据完整性保障</li><li>前身为安全套接层(Secure Sockets Layer)-SSL</li><li>IETF(互联网工程用户组)将SSL进行标准化</li><li>传输层安全协议使用X.509认证，之后利用非对称加密演算来对通信方做身份认证，之后交换对称密钥作为会谈密钥(Session key)</li></ul><p><strong>简述:</strong></p><ul><li>TLS协议采用C/S架构，以便在两个应用程序间透过网络创建安全的传输通道，从而防止数据传输时受到窃听或篡改</li><li>TLS与高层的应用层协议(HTTP,FTP,Telnet等)无耦合</li><li>所以应用层协议能透明的运行在TLS协议之上，由TLS协议进行创建加密信道需要的协商和认证</li><li>应用层协议传送的数据在通过TLS协议时都会被加密，从而达到保证通信的私密性</li></ul><p><strong>逻辑:</strong></p><ul><li>TLS协议是可选的，必须配置客户端和服务器才能使用</li><li>主要有两种方式实现这一目标:<blockquote><p>一个是使用统一的TLS协议端口(例如:用于HTTPS的端口443)<br>另一个是客户端请求服务器连接到TLS时使用特定的协议机制</p></blockquote></li><li>一旦客户端和服务器都同意使用TLS协议，他们通过使用一个握手过程协商出一个有状态的连接以传输数据</li><li>通过握手，客户端和服务器协商各种参数用于创建安全连接，握手过程:</li></ul><ol><li>当客户端连接到支持TLS协议的服务器要求创建安全连接并列出了受支持的密码组合（加密密码算法和加密哈希函数），握手开始</li><li>服务器从该列表中决定加密和散列函数，并通知客户端</li><li>服务器发回其数字证书，此证书通常包含服务器的名称、受信任的证书颁发机构（CA）和服务器的公钥</li><li>客户端确认其颁发的证书的有效性</li><li>为了生成会话密钥用于安全连接，客户端使用服务器的公钥加密随机生成的密钥，并将其发送到服务器，只有服务器才能使用自己的私钥解密</li><li>利用随机数，双方生成用于加密和解密的对称密钥</li><li>这就是TLS协议的握手，握手完毕后的连接是安全的，直到连接（被）关闭</li><li>如果上述任何一个步骤失败，TLS握手过程就会失败，并且断开所有的连接</li></ol><h3 id="SSL-Secure-Sockets-Layer"><a href="#SSL-Secure-Sockets-Layer" class="headerlink" title="SSL(Secure Sockets Layer)"></a>SSL(Secure Sockets Layer)</h3><p><strong>安全套接层</strong></p><p><strong>概述:</strong></p><ul><li>SSL是最初是网景公司Netscape用于对HTTPS协议进行加密而退出的</li><li>SSL包含记录层(Record Layer)和传输层，记录层协议确定传输层数据的封装格式</li></ul><hr><h3 id="SSH-Secure-Shell"><a href="#SSH-Secure-Shell" class="headerlink" title="SSH(Secure Shell)"></a>SSH(Secure Shell)</h3><p><strong>安全外壳协议</strong></p><p><strong>概述:</strong></p><ul><li>网络层协议</li><li>是一种加密的网络传输协议</li><li>可在不安全的网络中为网络服务提供安全的传输环境</li><li>任何网络服务都可以通过SSH实现安全传输</li><li>在设计上，SSH是Telnet和非安全shell的替代品，而Telnet和Berkeley rlogin、rsh、rexec等协议采用明文传输，使用不可靠的密码，容易遭到监听、嗅探和中间人攻击</li></ul><p><strong>简述:</strong></p><ul><li>SSH通过在网络中创建安全隧道来实现SSH客户端与服务器之间的连接</li><li>SSH最常见的用途是远程登录系统，通常利用SSH来传输命令行界面和远程执行命令</li><li>SSH旨在保证非安全网络环境（例如互联网）中信息加密完整可靠</li><li>SSH以非对称加密实现身份验证</li><li>SSH协议有两个主要版本，分别是SSH-1和SSH-2</li><li>SSH的经典用途是登录到远程电脑中执行命令</li><li>SSH也支持隧道协议、端口映射和X11连接。借助SFTP或SCP协议，SSH还可以传输文件</li><li>SSH使用客户端-服务器模型，标准端口为22</li></ul><p><strong>SSH协议框架中最主要的部分是三个协议:</strong></p><ul><li><p>传输层协议(The Transport Layer Protocol):传输层协议提供服务器认证，数据机密性，信息完整性等的支持</p></li><li><p>用户认证协议(The User Authentication Protocol):用户认证协议为服务器提供客户端的身份鉴别</p></li><li><p>连接协议(The Connection Protocol):连接协议将加密的信息隧道复用成若干个逻辑通道，提供给更高层的应用协议使用</p></li><li><p>同时还有为许多高层的网络安全应用协议提供扩展的支持</p></li><li><p>各种高层应用协议可以相对地独立于SSH基本体系之外，并依靠这个基本框架，通过连接协议使用SSH的安全机制</p></li></ul><hr><h3 id="PGP-Pretty-Good-Privacy"><a href="#PGP-Pretty-Good-Privacy" class="headerlink" title="PGP(Pretty Good Privacy)"></a>PGP(Pretty Good Privacy)</h3><p><strong>优良保密协议</strong></p><p><strong>概述:</strong></p><ul><li>是一套用于讯息加密、验证的应用程序，采用IDEA的散列算法作为加密和验证之用</li><li>1997年7月，PGP Inc.与齐默尔曼同意IETF制定一项公开的互联网标准，称作OpenPGP，任何支持这一标准的程序也被允许称作OpenPGP</li><li>PGP及其同类产品均遵守OpenPGP数据加解密标准<a href="https://tools.ietf.org/html/rfc4880" target="_blank" rel="noopener">RFC 4880</a><blockquote><p><code>https://tools.ietf.org/html/rfc4880</code></p></blockquote></li><li>官网<a href="https://web.archive.org/web/20041230152556/http://www.pgp.com/" target="_blank" rel="noopener">跳转</a><blockquote><p><code>https://web.archive.org/web/20041230152556/http://www.pgp.com/</code></p></blockquote></li></ul><hr><h3 id="IPsec-Internet-Protocol-Security"><a href="#IPsec-Internet-Protocol-Security" class="headerlink" title="IPsec(Internet Protocol Security)"></a>IPsec(Internet Protocol Security)</h3><p><strong>互联网安全协议</strong></p><p><strong>概述:</strong></p><ul><li>一个协议包，透过对IP协议的分组进行加密和认证来保护IP协议的网络传输协议族(一些相互关联的协议的集合)</li></ul><p><strong>IPsec主要由以下协议组成</strong></p><ol><li>认证头(AH)，为IP数据报提供无连接数据完整性、消息认证以及防重放攻击保护</li><li>封装安全载荷(ESP)，提供机密性、数据源认证、无连接完整性、防重放和有限的传输流(traffic-flow)机密性</li><li>安全关联(SA)，提供算法和数据包，提供AH、ESP操作所需的参数</li></ol><hr><p><strong>其他</strong></p><ul><li><p>密码学无政府主义(Crypto-anarchism)</p></li><li><p>加密无政府<a href="https://zh.wikipedia.org/wiki/%E5%AF%86%E7%A0%81%E5%AD%A6%E6%97%A0%E6%94%BF%E5%BA%9C%E4%B8%BB%E4%B9%89" target="_blank" rel="noopener">跳转至中文维基</a><br><code>https://zh.wikipedia.org/wiki/%E5%AF%86%E7%A0%81%E5%AD%A6%E6%97%A0%E6%94%BF%E5%BA%9C%E4%B8%BB%E4%B9%89</code></p></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></div><div></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://unit-serow.github.io/2020/02/12/%E5%8A%A0%E5%AF%86%E4%B8%8E%E8%A7%A3%E5%AF%86-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="serow"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UNIT"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/02/12/%E5%8A%A0%E5%AF%86%E4%B8%8E%E8%A7%A3%E5%AF%86-1/" itemprop="url">加密与解密</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-12T00:06:32+08:00">2020-02-12 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/%E5%AF%86%E7%A0%81/" itemprop="url" rel="index"><span itemprop="name">密码</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="加密-解密-类型与算法概述"><a href="#加密-解密-类型与算法概述" class="headerlink" title="加密/解密-类型与算法概述"></a>加密/解密-类型与算法概述</h1><ul><li>整理范围为现代密码学中的密码学算法</li><li>主要注重于对各种加密算法的浅层了解，与基本使用</li><li>对于算法本质的刨析这里先不做阐述</li><li>对于加密也先不做阐述</li></ul><h2 id="对称密钥密码学"><a href="#对称密钥密码学" class="headerlink" title="对称密钥密码学"></a>对称密钥密码学</h2><p><strong>概述:</strong></p><ul><li>[Symmetric-key algorithm]</li><li>别称:对称加密，对称密钥加密，对称密钥算法</li><li>别称:私钥加密，共享密钥加密</li></ul><p><strong>定义:</strong></p><ul><li>加密和解密时使用相同的密钥</li><li>或者使用两个可以简单地进行互相推算的密钥</li><li>多用于维持多个成员之中的秘密通信</li></ul><p><strong>常用的对称加密算法:</strong></p><ul><li>DES(数据加密标准)</li><li>3DES</li><li>AES(高端加密标准)</li><li>Blowfish</li><li>IDEA</li><li>RC5(分组加密算法)</li><li>RC6</li></ul><hr><h3 id="分组加密"><a href="#分组加密" class="headerlink" title="分组加密"></a>分组加密</h3><p><strong>概述:</strong></p><ul><li>[Block cipher]</li><li>别称:分组密码，分块加密，块密码</li><li>属于一种对称加密算法</li><li>DES是现代分组加密设计的基础思想</li><li>IBM在20世纪70年代基于<code>Horst Feistel</code>工作完成的<code>Lucifer</code>被客观认为是第一个现代分组密码</li><li>分组密码取用明文的一个区块和密钥，输出相同大小的密文区块</li><li>DES和AES是美国联邦政府核定的分组密码标准(AES将取代DES)</li></ul><p><strong>定义:</strong></p><ul><li>先将明文分成多个等长的模块(blocak)，然后使用确定的算法和对称密钥对每组分别进行加密与解密</li></ul><hr><h3 id="流加密"><a href="#流加密" class="headerlink" title="流加密"></a>流加密</h3><p><strong>概述:</strong></p><ul><li>[Stream cipher]</li><li>别称:数据流加密，流密码</li><li>属于一种对称加密算法</li><li>该算法解决了对称加密完善保密性(perfect secrecy)的实际操作困难</li><li>RC4是流加密的实现</li><li>相对于区块加密，制造一段任意长的密钥原料，与明文依比特或字符结合，类似一次一密密码本(one-time pad)，输出的流根据加密时的内部状态而定</li><li>输出的流根据加密时的内部状态而定</li></ul><p><strong>定义:</strong></p><ul><li>先加密和解密双方使用相同伪随机加密数据流(pseudo-random stream)作为密钥</li><li>然后让明文数据每次与密钥数据流顺次对应加密，从而得到密文数据流</li><li>实践中数据通常是一个位(bit)并用异或(xor)操作加密</li></ul><hr><h2 id="非对称密钥密码学"><a href="#非对称密钥密码学" class="headerlink" title="非对称密钥密码学"></a>非对称密钥密码学</h2><p><strong>概述:</strong></p><ul><li>别称:公开密钥密码学 [Public-key cryptography]</li><li>别称:非对密钥码密码学 [Asymmetric cryptography]</li><li>别称:公开密钥加密算法，公钥密码学，非对称式密码学</li></ul><p><strong>定义:</strong></p><ul><li>拥有两个密钥，一个公开密钥，一个私有密钥，前者加密，后者解密</li><li>使用其中任一密钥用于加密，另一个则用于解密</li><li>经过密钥加密的密文只能通过对应的另一个密钥进行解密才能得到原文</li><li>曾用于加密的密钥也不能对其加密过的数据进行解密</li><li>因此加密和解密需要两个不同且互相对应的密钥，所以被称为非对称加密</li><li>不同于加密和解密都使用同一个密钥的对称加密</li><li>虽然这两个密钥于数学上相关，但依旧不同通过其中一个密钥来计算出另外一个密钥</li><li>因此其中一个可以公开，称为公钥，可以任意发布</li><li>不公开的密钥为私钥</li></ul><p><strong>简述:</strong></p><ol><li>加密过程d(c(x))=x</li><li>主机A撰写未加密明文x</li><li>主机B通过[密码学安全伪随机数生成器]生成一对密钥，其中一个公钥为c，另一个作为私钥d</li><li>而主机B要做的就是向主机A发送公钥c，即便任何主机于中间窃听到c也没关系</li><li>主机A用公钥c对明文x进行加密，得到密文c(x)</li><li>此时主机A向主机B发送密文c(x)</li><li>主机B在收到密文c(x)后，使用私钥d对密文c(x)进行解密d(c(x))，得到明文x</li><li>此时如果主机A没有私钥d时，它将无法透过主机A的公钥c和密文c(x)重新获得原文x</li></ol><hr><h2 id="密码散列函数"><a href="#密码散列函数" class="headerlink" title="密码散列函数"></a>密码散列函数</h2><p><strong>概述:</strong></p><ul><li>[Cryptographic hash function]</li><li>别称:加密散列函数，散列算法，哈希函数(hash)，消息摘要函数，杂凑函数</li><li>是散列函数(hash function)的一种</li><li>是一种单向函数(单向散列算法)</li><li>不一定使用到密钥，但和许多重要的密码算法相关</li><li>常用于数字签名/公钥数字签名(digital signature)</li><li>应用于<code>MD5</code>,<code>SHA-1</code>,<code>SHA-2</code>,<code>SHA-3/Keccak</code></li><li>数字签名标准内的数字签名算法</li><li>它将输入数据(通常是一整份文件)输出成较短的固定长度散列值，这个过程是单向的，逆向操作难以完成，而且碰撞(两个不同的输入产生相同的散列值)发生的几率非常小</li><li>消息认证码或押码(Message authentication codes, MACs)很类似密码散列函数，除了接收方额外使用秘密密钥来认证散列值</li></ul><h3 id="SHA类密码散列函数"><a href="#SHA类密码散列函数" class="headerlink" title="SHA类密码散列函数"></a>SHA类密码散列函数</h3><p><strong>概述:</strong></p><ul><li>[Secure Hash Algorithm]，缩写为SHA，常用于特指一整个密码散列函数系列</li><li>别称:安全散列算法，安全哈希算法</li><li>由FIPS<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>认证的安全散列算法</li><li>由美国国家安全局(NSA)所设计</li><li>由美国国家标准与技术研究院(NIST)发布</li><li>是一种密码散列函数</li><li>用于计算出一个数字消息所对应到的，长度固定的字符串(又称信息摘要)的算法</li></ul><p><strong>系列成员:</strong></p><ul><li>SHA系列的五个算法:<blockquote><p><code>SHA-1,SHA-224,SHA-256,SHA-384,SHA-521</code></p></blockquote></li><li><code>SHA-256</code>到<code>SHA-512</code>有时被并称为<code>SHA-2</code></li><li><code>SHA-1</code>在许多安全协议中广为使用</li><li>包括<code>TLS</code>,<code>SSL</code>,<code>PGP</code>,<code>SSH</code>,<code>S/MIME</code>,<code>IPsec</code></li><li>最初的算法于1993年发布<code>SHA-0</code></li><li>也可称为[安全杂凑标准(secure hash standard)，<code>FIPS PUB 180</code></li><li>NSA于1995年发布<code>SHA-0</code>修订版本<code>FIPS PUB 180-1</code>(SHA-1)</li><li>最新的标准是FIPS PUB 180-3于2008年更新</li><li>规定了SHA-1，SHA-224，SHA-256，SHA-384，和SHA-512这几种单向散列算法</li><li><code>SHA-1</code>，<code>SHA-224</code>和<code>SHA-256</code>适用于长度不超过<code>2^64</code>二进制位的消息</li><li><code>SHA-384</code>和<code>SHA-512</code>适用于长度不超过<code>2^128</code>二进制位的消息</li></ul><p><strong>简述:</strong></p><ul><li>思想是接收一段明文，然后以一种不可逆的方式将它转换成一段(通常更小)的密文</li><li>或称为</li><li>取一串预映射或信息(输入码)，并将它们转化为长度较短，位数固定的输出序列</li><li>即散列值 也可以称为信息摘要或信息认证码 的过程</li></ul><p><strong>散列算法概述:</strong></p><ul><li>散列是信息的提炼，通常其长度要比原信息小的多，且为一个固定长度</li><li>加密性强的散列一定是不可逆的，所以说通过散列的结构将无法退出任何部分的原始信息</li><li>任何输出信息的变化，哪怕仅一位，都将导致散列结果的明显变化，即为雪崩效应</li><li>散列还应该是防冲突的，即找不出具有相同散列结果的两条信息，具有这些特性的散列结果就可以用于验证信息是否被修改</li><li>单向散列函数一般用于产生信息摘要，密匙加密等，常见的有MD系列(由RSA数据安全公司开发的一种单向散列算法)，SHA系列</li><li>散列算法可实现数字签名的实现</li></ul><p><strong>数字签名概述:</strong></p><ul><li>数字签名的原理是将要传送的明文通过一种函数运算(hash)转换成报文摘要(不同的明文对应不同的摘要)</li><li>报文摘要加密后与明文一种传送给接受方</li><li>接受方将接受的明文产生新的报文摘要与发送方发来的报文摘要解密比较</li><li>比较结果一致表示明文未被改动，反之则明文已被篡改</li></ul><hr><h3 id="消息认证码"><a href="#消息认证码" class="headerlink" title="消息认证码"></a>消息认证码</h3><p><strong>概述:</strong></p><ul><li>[Message authentication code，MAC]</li><li>别称:消息鉴别码、文件消息认证码、讯息鉴别码、信息认证码</li></ul><p><strong>简述:</strong></p><ul><li>是经过特定算法后产生的一小段信息，用于检查某段消息的完整性，以及作身份验证</li><li>用来检查在消息传递过程中，其内容是否被更改过，不管更改的原因是来自意外或是蓄意攻击</li><li>同时可以作为消息来源的身份验证，确认消息的来源</li><li>消息认证码的算法中，通常会使用带密钥的散列函数(HMAC)，或者块密码的带认证工作模式(如CBC-MAC)</li><li>信息鉴别码不能提供对信息的保密，若要同时实现保密认证，同时需要对信息进行加密</li></ul><p><strong>密钥散列消息认证码</strong></p><ul><li>Keyed-hash message authentication code</li><li>又称散列消息认证码(Hash-based message authentication code，HMAC)</li><li>是一种通过特别计算方式之后产生的消息认证码(MAC)，使用密码散列函数，同时结合一个加密密钥</li><li>它可以用来保证数据的完整性，同时可以用来作某个消息的身份验证</li></ul><hr><h3 id="密码学安全伪随机数生成器"><a href="#密码学安全伪随机数生成器" class="headerlink" title="密码学安全伪随机数生成器"></a>密码学安全伪随机数生成器</h3><p><strong>概述:</strong></p><ul><li>Cryptographically secure pseudo-random number generator</li><li>通称CSPRNG</li><li>亦作密码学伪随机数生成器</li><li>是一种能够通过运算得出密码学安全伪随机数的伪随机数生成器</li><li>相较于统计学伪随机数生成器和更弱的伪随机数生成器，CSPRNG所生成的密码学安全伪随机数具有额外的伪随机属性</li><li>CSPRNG常被作为密码学原件，用以搭建更复杂的密码学应用</li><li>如，可变长CSPRNG和XOR函数搭配即构成流密码的编解码方法</li></ul><hr><h3 id="对等加密-Reciprocal-cipher"><a href="#对等加密-Reciprocal-cipher" class="headerlink" title="对等加密(Reciprocal cipher)"></a>对等加密(Reciprocal cipher)</h3><p><strong>概述:</strong></p><ul><li>是对称密钥加密(Symmetric-key algorithm)的一个特例</li><li>该类密码的加密算法是它自己本身的逆反函数，所以其解密算法等同于加密算法</li><li>如果要还原对等加密的密文，套用加密同样的算法即可得到明文</li><li>换句话说，使用相同的密钥，两次连续的对等加密运算后会回复原始文字</li><li>在数学上，这有时称之为对合<blockquote><p>常见的对等加密算法有<code>ROT13</code>，<code>异或密码</code>，<code>RC4</code></p></blockquote></li></ul><hr><ul><li>几个重要的概念，公钥，私钥，加密，解密，对称，非对称，散列算法(hash)</li><li>所有的复杂的现代密码学算法都是基于对称加密或非对称加密算法与散列算法加密所建立的</li></ul><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none;padding-left:0"><li id="fn:1"><span style="display:inline-block;vertical-align:top;padding-right:10px">1.</span><span style="display:inline-block;vertical-align:top">联邦信息处理标准(Federal Information Processing Standards)</span><a href="#fnref:1" rev="footnote"> ↩</a></li></ol></div></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div><div></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://unit-serow.github.io/2020/02/11/%E9%9A%8F%E7%AC%94-2020-2-2-11/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="serow"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UNIT"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/02/11/%E9%9A%8F%E7%AC%94-2020-2-2-11/" itemprop="url">随笔 2020-2-2.11</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-11T03:13:15+08:00">2020-02-11</time></span></div></header><div class="post-body" itemprop="articleBody">简易加密文案<div class="post-button text-center"><a class="btn" href="/2020/02/11/%E9%9A%8F%E7%AC%94-2020-2-2-11/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div><div></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://unit-serow.github.io/2020/02/09/Docker-%E9%9A%8F%E7%AC%94/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="serow"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UNIT"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/02/09/Docker-%E9%9A%8F%E7%AC%94/" itemprop="url">Docker-随笔</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-09T17:05:25+08:00">2020-02-09 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="Docker-随笔"><a href="#Docker-随笔" class="headerlink" title="Docker 随笔"></a>Docker 随笔</h3><ul><li><p>Docker 由Go语言编写</p></li><li><p>Docker 主要分支(三大项目)</p></li></ul><ol><li><p>Docker Engine-Community</p><blockquote><p>docker社区</p></blockquote></li><li><p>Docker Compose</p><blockquote><p>docker自动化操作-YAML/Go</p></blockquote></li><li><p>Docker Machine</p><blockquote><p>docker集群化管理</p></blockquote></li></ol><hr><ul><li>基本概念</li><li>dockerfile</li><li>容器集群网络</li><li>docker虚拟机</li><li>swarm集群</li></ul><hr><ul><li>绝对基本流程<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br><span class="line">docker search</span><br><span class="line">docker pull</span><br><span class="line">docker run</span><br><span class="line">search ps -a</span><br><span class="line">docker rmi</span><br><span class="line">docker rm -f </span><br><span class="line">docker start&#x2F;restart&#x2F;stop</span><br></pre></td></tr></table></figure></li><li>能直接拉就直接拉，不到极端情况下最好别总想着整一些类似于dockerfile的花活</li></ul><hr><ul><li><p>docker hub<a href="https://hub.docker.com" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://hub.docker.com</code></p></blockquote></li><li><p>文档<a href="https://docs.docker.com/" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://docs.docker.com/</code></p></blockquote></li></ul><hr><h3 id="容器服务安装并启动实例"><a href="#容器服务安装并启动实例" class="headerlink" title="容器服务安装并启动实例"></a>容器服务安装并启动实例</h3><p><strong>容器-操作系统</strong></p><ul><li>Ubantu/Debian/CentOS</li><li>先<code>docker search</code>看一下镜像</li><li>直接<code>pull</code>过来然后<code>exec</code>就行</li><li>默认是最新版本<code>Ubantu/Debian/CentOS:latest</code></li><li>Docker Hub内点击<code>Sort by</code>选项卡查看其他版本</li><li>这里暂时不阐述通过Dockerfile构建的方法</li></ul><ol><li><p>Ubuntu 镜像库地址<a href="https://hub.docker.com/_/ubuntu?tab=tags&page=1" target="_blank" rel="noopener">跳转</a><br><code>https://hub.docker.com/_/ubuntu?tab=tags&amp;page=1</code></p></li><li><p>CentOS 镜像库地址<a href="https://hub.docker.com/_/centos?tab=tags&page=1" target="_blank" rel="noopener">跳转</a><br><code>https://hub.docker.com/_/centos?tab=tags&amp;page=1</code></p></li><li><p>Debian 镜像库地址<a href="https://hub.docker.com/_/debian?tab=tags&page=1" target="_blank" rel="noopener">跳转</a><br><code>https://hub.docker.com/_/debian?tab=tags&amp;page=1</code></p></li></ol><hr><p><strong>容器-web服务</strong></p><ul><li>Nginx/Apache/Node.js/Tomcat</li></ul><ol><li>Nginx</li></ol><ul><li><p>说明:Nginx是一个高性能的HTTP和反向代理web服务器，同时也提供了<code>IMAP/POP3/SMTP</code>服务</p></li><li><p>镜像库地址<a href="https://hub.docker.com/_/nginx?tab=tags" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://hub.docker.com/_/nginx?tab=tags</code></p></blockquote></li><li><p>运行容器:</p><blockquote><p>$ docker run –name nginx-test -p 8080:80 -d nginx</p></blockquote></li><li><p>参数说明:</p><blockquote><p><code>--name nginx-test</code>:容器名称<br><code>-p 8080:80</code>:端口进行映射，将本地8080端口映射到容器内部的80端口<br><code>-d nginx</code>:设置容器在在后台一直运行</p></blockquote></li></ul><hr><ol start="2"><li>Apache-httpd</li></ol><ul><li><p>镜像库地址<a href="https://hub.docker.com/_/httpd?tab=tags" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://hub.docker.com/_/httpd?tab=tags</code></p></blockquote></li><li><p>运行容器:</p><blockquote><p><code>$ docker run -p 80:80 -v $PWD/www/:/usr/local/apache2/htdocs/ -v $PWD/conf/httpd.conf:/usr/local/apache2/conf/httpd.conf -v $PWD/logs/:/usr/local/apache2/logs/ -d httpd</code></p></blockquote></li><li><p>参数说明:</p><blockquote><p><code>-p 80:80</code>:将容器的 80 端口映射到主机的 80 端口<br><code>-v $PWD/www/:/usr/local/apache2/htdocs/</code>:将主机中当前目录下的<code>www</code>目录挂载到容器的<code>/usr/local/apache2/htdocs/</code><br><code>-v $PWD/conf/httpd.conf:/usr/local/apache2/conf/httpd.conf</code>:将主机中当前目录下的<code>conf/httpd.conf</code>文件挂载到容器的<code>/usr/local/apache2/conf/httpd.conf</code><br><code>-v $PWD/logs/:/usr/local/apache2/logs/</code>:将主机中当前目录下的<code>logs</code>目录挂载到容器的<code>/usr/local/apache2/logs/</code></p></blockquote></li></ul><hr><ol start="3"><li>Node.js</li></ol><ul><li>镜像库地址<a href="https://hub.docker.com/_/node?tab=tags" target="_blank" rel="noopener">跳转</a><blockquote><p><code>https://hub.docker.com/_/node?tab=tags</code></p></blockquote></li><li>运行容器:<blockquote><p><code>docker run -itd --name node-test node</code></p></blockquote></li><li>进入容器内部查看其服务版本</li></ul><hr><ol start="4"><li>Tomcat</li></ol><ul><li>镜像库地址<a href="https://hub.docker.com/_/tomcat?tab=tags" target="_blank" rel="noopener">跳转</a><blockquote><p><code>https://hub.docker.com/_/tomcat?tab=tags</code></p></blockquote></li><li>运行容器:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --name tomcat -p 8080:8080 -v $PWD&#x2F;test:&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;webapps&#x2F;test -d tomcat</span><br><span class="line">acb33fcb4beb8d7f1ebace6f50f5fc204b1dbe9d524881267aa715c61cf75320</span><br></pre></td></tr></table></figure></li><li>参数说明:<blockquote><p><code>-p 8080:8080</code>:将容器的8080端口映射到主机的8080端口<br><code>-v $PWD/test:/usr/local/tomcat/webapps/test</code>:将主机中当前目录下的<code>test</code>挂载到容器的<code>/test</code></p></blockquote></li></ul><hr><p><strong>容器-数据库</strong></p><ul><li><p>MySQL/MongoDB/Redis</p></li><li><p>MySQL</p></li><li><p>镜像库地址<a href="https://hub.docker.com/_/mysql?tab=tags" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://hub.docker.com/_/mysql?tab=tags</code></p></blockquote></li><li><p>运行容器:</p><blockquote><p><code>$ docker run -itd --name mysql-test -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql</code></p></blockquote></li><li><p>参数说明:</p><blockquote><p><code>-p 3306:3306</code>:映射容器服务的3306端口到宿主机的3306端口，外部主机可以直接通过宿主机<code>ip:3306</code>访问到MySQL的服务<br><code>MYSQL_ROOT_PASSWORD=123456</code>:设置MySQL服务root用户的密码</p></blockquote></li></ul><hr><ul><li>MongoDB</li><li>简介:<code>MongoDB</code>是一个免费的开源跨平台面向文档的<code>NoSQL</code>数据库程序</li><li>镜像库地址:<a href="https://hub.docker.com/_/mongo?tab=tags&page=1" target="_blank" rel="noopener">跳转</a><blockquote><p><code>https://hub.docker.com/_/mongo?tab=tags&amp;page=1</code></p></blockquote></li><li>运行容器:<blockquote><p><code>$ docker run -itd --name mongo -p 27017:27017 mongo --auth</code></p></blockquote></li><li>参数说明:<blockquote><p><code>-p 27017:27017</code>:映射容器服务的27017端口到宿主机的27017端口，使外部可以直接通过宿主机<code>ip:27017</code>访问到<code>mongo</code>的服务<br><code>--auth</code>:需要密码才能访问容器服务</p></blockquote></li><li>接着使用以下命令添加用户和设置密码，并且尝试连接<blockquote><p><code>$ docker exec -it mongo mongo admin</code></p></blockquote></li><li>创建一个名为<code>admin</code>，密码为123456的用户<blockquote><p><code>db.createUser({ user:&#39;admin&#39;,pwd:&#39;123456&#39;,roles:[ { role:&#39;userAdminAnyDatabase&#39;, db: &#39;admin&#39;}]});</code></p></blockquote></li><li>尝试使用上面创建的用户信息进行连接<blockquote><p><code>db.auth(&#39;admin&#39;, &#39;123456&#39;)</code></p></blockquote></li></ul><hr><ul><li>Redis</li><li>简介:是一个开源的使用<code>ANSI C</code>语言编写、支持网络、可基于内存亦可持久化的日志型,<code>Key-Value</code>的<code>NoSQL</code>数据库，并提供多种语言的<code>API</code></li><li>镜像库地址:<a href="https://hub.docker.com/_/redis?tab=tags" target="_blank" rel="noopener">跳转</a><blockquote><p><code>https://hub.docker.com/_/redis?tab=tags</code></p></blockquote></li><li>运行容器:<blockquote><p><code>$ docker run -itd --name redis-test -p 6379:6379 redis</code></p></blockquote></li><li>通过<code>redis-cli</code>连接测试使用<code>redis</code>服务<blockquote><p><code>$ docker exec -it redis-test /bin/bash</code></p></blockquote></li></ul><hr><ul><li><p>PHP<a href="https://hub.docker.com/_/php?tab=tags" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://hub.docker.com/_/php?tab=tags</code></p></blockquote></li><li><p>Python<a href="https://hub.docker.com/_/python?tab=tags" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://hub.docker.com/_/python?tab=tags</code></p></blockquote></li><li><p>redis.conf<a href="https://github.com/antirez/redis/blob/unstable/redis.conf" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://github.com/antirez/redis/blob/unstable/redis.conf</code></p></blockquote></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></div><div></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://unit-serow.github.io/2020/02/09/Docker-Machine-1-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="serow"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UNIT"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/02/09/Docker-Machine-1-1/" itemprop="url">Docker Machine/Swarm-1.1</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-09T14:38:25+08:00">2020-02-09 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="docker-machine-基本命令"><a href="#docker-machine-基本命令" class="headerlink" title="docker machine-基本命令"></a>docker machine-基本命令</h3><ul><li><p>虚拟机与容器的区别:虚拟机内可以定义容器</p></li><li><p>列出已有虚拟机</p><blockquote><p><code>docker-machine ls</code></p></blockquote></li><li><p>创建虚拟机</p><blockquote><p><code>docker-machine create --driver [virtualbox] [test]</code><br>参数–driver用于指定虚拟机驱动类型,这里是virtualbox</p></blockquote></li><li><p>虚拟机驱动一览<a href="https://docs.docker.com/machine/drivers/" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://docs.docker.com/machine/drivers/</code></p></blockquote></li><li><p>查看虚拟器的ip</p><blockquote><p><code>docker-machine ip [test]</code></p></blockquote></li></ul><hr><ul><li><p>管理命令</p><blockquote><p><code>docker-machine start/restart/stop test</code></p></blockquote></li><li><p>帮助与检阅命令</p><blockquote><p><code>version/help/info</code></p></blockquote></li><li><p>官方文档<a href="https://docs.docker.com/machine/reference/create/" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://docs.docker.com/machine/reference/create/</code></p></blockquote></li></ul><hr><p><strong>指令摘要</strong></p><table><thead><tr><th align="left">命令</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left">kill</td><td align="left">杀死指定主机</td></tr><tr><td align="left">rm</td><td align="left">删除指定主机</td></tr><tr><td align="left">ssh</td><td align="left">连接主机</td></tr><tr><td align="left">upgrade</td><td align="left">更新</td></tr><tr><td align="left">url</td><td align="left">获取监听url</td></tr><tr><td align="left">scp</td><td align="left">复制</td></tr><tr><td align="left">regenerate-certs</td><td align="left">刷新TLS</td></tr></tbody></table><hr><ul><li><p>工作节点(worker node)</p></li><li><p>管理节点(manager node)</p></li><li><p>在VMware里安装虚拟机的虚拟机驱动时需要</p></li><li><p>点开虚拟机设置里的处理器选项卡</p></li><li><p>勾选虚拟化引擎选项卡</p></li></ul><hr><h3 id="Docker-Swarm集群-基本命令"><a href="#Docker-Swarm集群-基本命令" class="headerlink" title="Docker Swarm集群-基本命令"></a>Docker Swarm集群-基本命令</h3><ul><li><p>创建管理节点(manager node)</p><blockquote><p><code>docker-machine create -d virtualbox swarm-manager</code></p></blockquote></li><li><p>连入机器后执行</p><blockquote><p><code>docker swarm init --advertise-addr [创建机器时分配的 ip]</code></p></blockquote></li><li><p>然后拷贝输出指令</p></li><li><p>创建工作节点(worker node)</p></li><li><p>进入工作节点运行拷贝的指令将其设置为工作节点</p></li></ul><hr><ul><li><p>随机部署服务到集群中</p></li><li><p><code>alpine</code>是操作系统</p><blockquote><p><code>docker service create --replicas 1 --name 服务名 alpine ping docker.com</code></p></blockquote></li><li><p>查看部署情况</p><blockquote><p><code>docker service ps [服务名]</code></p></blockquote></li><li><p>查看具体信息</p><blockquote><p><code>docker service inspect --pretty [服务名]</code></p></blockquote></li><li><p>扩展服务到多节点(两个)</p><blockquote><p><code>docker service scale [服务名=2]</code></p></blockquote></li><li><p>删除服务</p><blockquote><p><code>docker service rm [服务名]</code></p></blockquote></li><li><p>查看所有节点</p><blockquote><p><code>docker node ls</code></p></blockquote></li><li><p>关闭服务节点</p><blockquote><p><code>docker node update --availability drain swarm-worker1</code></p></blockquote></li><li><p>开启服务节点</p><blockquote><p><code>docker node update --availability active swarm-worker1</code></p></blockquote></li><li><p><code>Active/Drain</code>分别代表开启与关闭</p></li></ul><hr><p><strong>滚动升级</strong></p><ul><li><p>前提是已存在指定服务</p></li><li><p>创建服务</p><blockquote><p><code>docker service create --replicas 1 --name redis --update-delay 10s redis:3.0.6</code></p></blockquote></li><li><p>滚动更新</p><blockquote><p><code>docker service update --image [服务名:版本号] [指定已有的服务镜像]</code></p></blockquote></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></div><div></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://unit-serow.github.io/2020/02/09/Docker-Swarm-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="serow"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UNIT"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/02/09/Docker-Swarm-1/" itemprop="url">Docker Swarm-集群</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-09T13:47:40+08:00">2020-02-09 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/%E8%99%9A%E6%8B%9F%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">虚拟化</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="Swarm-集群管理"><a href="#Swarm-集群管理" class="headerlink" title="Swarm 集群管理"></a>Swarm 集群管理</h3><p><strong>概述:</strong></p><ul><li><p><code>Docker Swarm</code>是Docker的集群管理工具</p></li><li><p>它将<code>Docker主机池</code>转变为单个虚拟Docker主机</p></li><li><p><code>Docker Swarm</code>提供了标准的<code>Docker API</code></p></li><li><p>目的是使所有任何已经与Docker守护程序通信的工具都可以使用Swarm轻松地扩展到多个主机</p></li><li><p>支持的工具包括但不限于以下各项：</p></li><li><p>Dokku</p></li><li><p>Docker Compose</p></li><li><p>Docker Machine</p></li><li><p>Jenkins</p></li></ul><p><strong>原理概述:</strong></p><ul><li><code>swarm集群</code>由管理节点(manager)和工作节点(work node)构成</li><li><code>swarm mananger</code>:负责整个集群的管理工作包括集群配置,服务管理等所有跟集群有关的工作</li><li><code>work node</code>:即为<code>available node</code>,主要负责运行相应的服务来执行任务(task)</li><li>逻辑简述</li><li>管理节点(swarm manager)内存储着若干个服务(service)的副本(replicas)文件</li><li>工作节点(available/worker node)内存储这服务的标识与服务的镜像文件(container)</li><li>管理节点将所有的服务副本都分配到工作节点内，并管理与控制工作节点内的任务执行<blockquote><p>[swarm manager[service replicas]]-&gt;[available node[task[container(service:latest)]]]<br>swarm manager-&gt;available node-1/available node-2/available node-3/available node-N</p></blockquote></li></ul><hr><p><strong>应用</strong></p><ul><li><p>以<code>Docker Machine</code>与<code>virtualbox</code>进行实践，需要先确保主机已安装<code>virtualbox</code></p></li><li><p>创建docker机器:</p><blockquote><p><code>$ docker-machine create -d virtualbox swarm-manager</code></p></blockquote></li></ul><hr><ul><li><p>创建管理节点(manager node)</p></li><li><p>初始化<code>swarm</code>集群，进行初始化的这台机器，就是集群的管理节点</p><blockquote><p><code>$ docker-machine ssh swarm-manager</code><br><code>$ docker swarm init --advertise-addr 192.168.99.101</code><br><code>--advertise-addr</code>后的IP为创建机器时分配的ip</p></blockquote></li><li><p>当为机器分配IP之后，命令行会输出向集群内添加工作节点的指令(连接令牌)</p><blockquote><p><code>To add a worker to this swarm，runthe following command</code><br><code>docker swarm join --token [...]</code></p></blockquote></li></ul><hr><ul><li>创建工作节点(worker node)</li><li>复制上面输出的指令(会被自动截断)<blockquote><p><code>$ docker swarm join --token [...]</code><br>输出<code>The node joined a swarm as a worker</code></p></blockquote></li></ul><hr><ul><li>查看集群信息<blockquote><p><code>docker info</code><br>输出内容中<code>Swarm active</code>内的<code>managers</code>与<code>node</code>即为节点信息</p></blockquote></li></ul><hr><ul><li><p>部署服务器到集群中</p></li><li><p>跟集群管理有关的任何操作，都是在管理节点上操作的</p></li><li><p>随机指派任一工作节点，并于工作节点上创建任意的一个服务</p><blockquote><p><code>docker@swarm-manager:~$ docker service create --replicas 1 --name [service name] alpine ping docker.com</code></p></blockquote></li><li><p>查看服务部署情况:</p><blockquote><p><code>docker@swarm-manager:~$ docker service ps [service name]</code></p></blockquote></li><li><p>查看<code>service</code>部署的具体信息:</p><blockquote><p><code>docker@swarm-manager:~$ docker service inspect --pretty [service name]</code></p></blockquote></li></ul><hr><ul><li><p>扩展集群服务</p></li><li><p>将service服务扩展到若干个节点</p><blockquote><p><code>docker@swarm-manager:~$ docker service scale [service name]=[节点数]</code></p></blockquote></li><li><p>查看服务部署情况:</p><blockquote><p><code>docker@swarm-manager:~$ docker service ps [service name]</code></p></blockquote></li></ul><hr><ul><li>删除服务<blockquote><p><code>docker@swarm-manager:~$ docker service rm [service name]</code></p></blockquote></li><li>查看服务部署情况:<blockquote><p><code>docker@swarm-manager:~$ docker service ps [service name]</code></p></blockquote></li></ul><hr><ul><li>滚动升级服务</li><li>将redis旧版本通过滚动升级至更高版本</li><li>创建一个3.0.6版本的redis<blockquote><p><code>docker@swarm-manager:~$ docker service create --replicas 1 --name redis --update-delay 10s redis:3.0.6</code></p></blockquote></li><li>滚动升级redis<blockquote><p><code>docker@swarm-manager:~$ docker service update --image redis:3.0.7 redis</code></p></blockquote></li><li>查看redis服务部署情况:<blockquote><p><code>docker@swarm-manager:~$ docker service ps redis</code></p></blockquote></li></ul><hr><ul><li><p>停止某个节点接收新的任务</p></li><li><p>查看所有的节点：</p><blockquote><p><code>docker@swarm-manager:~$ docker node ls</code></p></blockquote></li><li><p>默认所有的节点都是<code>Active</code>, 可以接收新的任务分配</p></li><li><p>停止节点<code>swarm-worker1</code>:</p><blockquote><p><code>docker node update --availability drain swarm-worker1</code></p></blockquote></li><li><p>此时<code>swarm-worker1</code>状态变为<code>Drain</code></p></li><li><p>不会影响到集群的服务，只是<code>swarm-worker1</code>节点不再接收新的任务</p></li><li><p>会使集群的负载能力有所下降</p></li><li><p>重新激活节点指令:</p><blockquote><p><code>docker@swarm-manager:~$ docker node update --availability active swarm-worker1</code></p></blockquote></li></ul><hr><p><strong>参考资料</strong></p><ul><li><p>虚拟机驱动<a href="https://docs.docker.com/machine/drivers/" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://docs.docker.com/machine/drivers/</code></p></blockquote></li><li><p>官方文档<a href="https://docs.docker.com/machine/reference/create/" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://docs.docker.com/machine/reference/create/</code></p></blockquote></li></ul><hr><p><strong>其他资源</strong></p><ul><li><p>Docker官方主页<a href="https://www.docker.com" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://www.docker.com</code></p></blockquote></li><li><p>Docker官方博客<a href="https://blog.docker.com/" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://blog.docker.com/</code></p></blockquote></li><li><p>Docker官方文档<a href="https://docs.docker.com/" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://docs.docker.com/</code></p></blockquote></li><li><p>Docker Store<a href="https://store.docker.com" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://store.docker.com</code></p></blockquote></li><li><p>Docker Cloud<a href="https://cloud.docker.com" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://cloud.docker.com</code></p></blockquote></li><li><p>Docker Hub<a href="https://hub.docker.com" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://hub.docker.com</code></p></blockquote></li><li><p>Docker的源代码仓库<a href="https://github.com/moby/moby" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://github.com/moby/moby</code></p></blockquote></li><li><p>Docker发布版本历史<a href="https://docs.docker.com/release-notes/" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://docs.docker.com/release-notes/</code></p></blockquote></li><li><p>Docker常见问题<a href="https://docs.docker.com/engine/faq/" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://docs.docker.com/engine/faq/</code></p></blockquote></li><li><p>Docker远端应用 API<a href="https://docs.docker.com/develop/sdk/" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://docs.docker.com/develop/sdk/</code></p></blockquote></li></ul><hr><p><strong>Docker国内镜像源</strong></p><ul><li><p>阿里云<a href="https://help.aliyun.com/document_detail/60750.html" target="_blank" rel="noopener">跳转</a></p><blockquote><p><code>https://help.aliyun.com/document_detail/60750.html</code></p></blockquote></li><li><p>网易云加速器</p><blockquote><p><code>http://hub-mirror.c.163.com</code></p></blockquote></li><li><p>中国官方加速器</p><blockquote><p><code>https://registry.docker-cn.com</code></p></blockquote></li><li><p>ustc的镜像</p><blockquote><p><code>https://docker.mirrors.ustc.edu.cn</code></p></blockquote></li><li><p>daocloud</p><blockquote><p><code>https://www.daocloud.io/mirror#accelerator-doc</code>(注册后使用)</p></blockquote></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></div><div></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://unit-serow.github.io/2020/02/09/Docker-1-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="serow"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UNIT"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/02/09/Docker-1-1/" itemprop="url">Docker-1.1</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-09T03:11:01+08:00">2020-02-09 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a>基本指令</h3><ul><li><p>查看已有镜像</p><blockquote><p><code>docker images</code></p></blockquote></li><li><p>参数:仓库源/标签/ID/创建时间/空间</p><blockquote><p><code>debian tag [镜像ID]</code> # 添加标签</p></blockquote></li><li><p>查看仓库内所有镜像文件</p><blockquote><p><code>docker search debian</code></p></blockquote></li><li><p>拉取仓库内默认版本的debian镜像<code>(debian:latest)</code></p><blockquote><p><code>docker pull debian</code></p></blockquote></li><li><p>查看所有已创建容器</p><blockquote><p><code>docker ps -a</code></p></blockquote></li><li><p>用容器启动所选镜像</p><blockquote><p><code>docker run -it --name [自定义命名] debian /bin/bash</code></p></blockquote></li></ul><hr><ul><li>启动，停止，重启所选容器<blockquote><p><code>docker start/stop/restart [容器ID]</code><br>参数:<code>·-i交互式操作</code>，<code>-t终端</code>，<code>-d后台运行</code></p></blockquote></li></ul><hr><ul><li>删除操作<blockquote><p><code>docker rmi debian</code>删除镜像<br><code>docker rm -f</code>删除容器<br><code>docker container prune</code>删除所有停止的容器</p></blockquote></li><li>容器必须停止才能进行删除</li></ul><hr><ul><li>进入后台后使用<code>docker attach</code>或<code>docker exec [容器ID]</code>进入该容器</li><li>前者暂时性，后者永久性</li><li>重新进入容器时还必须加入原来设置的启动参数</li><li>比如<code>/bin/bash和-it</code></li></ul><hr><ul><li><p>设置[service]端口映射与绑定IP</p><blockquote><p><code>docker run -p [可选的IP绑定]:[映射端口]:[原端口]/(udp/tcp) [镜像名] [启动脚本]</code><br>参数:<code>-P</code>是随机映射，<code>-p</code>是指定映射</p></blockquote></li><li><p>查看端口绑定情况</p><blockquote><p><code>docker port [服务名]</code></p></blockquote></li></ul><hr><h3 id="容器网络"><a href="#容器网络" class="headerlink" title="容器网络"></a>容器网络</h3><ul><li><p>父子关系这里都称为上下层级关系，与阶级关系不同</p></li><li><p>上级容器可以看到下级容器的关系</p></li><li><p>建立容器网络</p><blockquote><p><code>docker network create -d bridge/overlay(网络类型) [网络命名]</code>overlay<code>应用于</code>swarm`</p></blockquote></li><li><p>后台运行一个命名为<code>test1</code>的容器并把它并入<code>test-net</code>内，并开启交互式终端系统</p><blockquote><p><code>docker run -itd --name test1 --network test-net debian /bin/bash</code></p></blockquote></li><li><p>任何加入此网络的容器都会达成互联的状态</p></li></ul><hr><ul><li><p>设定所有容器域名和DNS</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim &#x2F;etc&#x2F;docker&#x2F;daemon.json</span><br><span class="line">&#123;&quot;dns&quot; : [&quot;111.111.111.111&quot;,&quot;1.1.1.1&quot;]&#125;</span><br></pre></td></tr></table></figure></li><li><p>查看是否生效</p><blockquote><p><code>docker run -it rm debian cat etc/resolv.conf</code></p></blockquote></li><li><p>指定容器设置域名和DNS服务器</p><blockquote><p><code>docker run -it --rm _hostname=HOSTNAME --dns=IP_ADDRESS --dns-search=DOMAIN(搜索域) debian</code></p></blockquote></li><li><p>没有指定<code>--dns</code>和<code>--dns-search</code>，Docker会默认用宿主主机上的<code>/etc/resolv.conf</code>来配置容器的DNS</p></li></ul><hr><ul><li><p>登陆<code>docker hub</code></p><blockquote><p><code>docker login</code></p></blockquote></li><li><p>退出<code>docker hub</code></p><blockquote><p><code>docker logout</code></p></blockquote></li><li><p>上传镜像</p><blockquote><p><code>docker tag 本地镜像名 username/远端镜像名</code></p></blockquote></li></ul><hr><ul><li><p>随笔</p><blockquote><p><code>Docker Engine</code> 引擎<br><code>REST API</code> 通用接口<br><code>Docker daemon</code> 守护进程</p></blockquote></li><li><p>自用简易指令集</p></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></div><div></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://unit-serow.github.io/2020/02/08/Docker-Machine/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="serow"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="UNIT"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/02/08/Docker-Machine/" itemprop="url">Docker-Machine</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-08T18:23:23+08:00">2020-02-08 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E8%BD%AF%E4%BB%B6/%E8%99%9A%E6%8B%9F%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">虚拟化</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="Docker-Machine"><a href="#Docker-Machine" class="headerlink" title="Docker Machine"></a>Docker Machine</h3><p><strong>概述:</strong></p><ul><li>可以实现在虚拟主机上安装Docker</li><li>并且可以使用<code>docker-machine</code>命令来管理主机</li><li><code>Docker Machine</code>管理的虚拟主机可以是机上的，也可以是云供应商的</li><li>使用<code>docker-machine</code>命令，可以用于启动，检查，停止和重新启动托管主机，也可以升级Docker客户端和守护程序</li><li>以及配置Docker客户端与本地主机进行通信</li><li>用于实现使用本地主机便可以操控远端的镜像容器集群</li></ul><p><strong>逻辑简述:</strong><br>[Client docker-machine[Client docker CLI[REST APT]]]-docker-machine create-&gt;[REST API[Server docker daemon]]</p><hr><p><strong>基于Linux安装Docker Machine</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ base&#x3D;https:&#x2F;&#x2F;github.com&#x2F;docker&#x2F;machine&#x2F;releases&#x2F;download&#x2F;v0.16.0 &amp;&amp;</span><br><span class="line">  curl -L $base&#x2F;docker-machine-$(uname -s)-$(uname -m) &gt;&#x2F;tmp&#x2F;docker-machine &amp;&amp;</span><br><span class="line">  sudo mv &#x2F;tmp&#x2F;docker-machine &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-machine &amp;&amp;</span><br><span class="line">  chmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-machine</span><br></pre></td></tr></table></figure><ul><li>查看版本以验证是否安装成功<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker-machine version</span><br><span class="line">docker-machine version 0.16.0, build 9371605</span><br></pre></td></tr></table></figure></li></ul><hr><p><strong>对于machine version的使用</strong></p><ol><li><p>列出可用的机器</p><blockquote><p><code>$ docker-machine ls</code></p></blockquote></li><li><p>创建机器</p></li></ol><ul><li>创建一个名为serow的机器<blockquote><p><code>$ docker-machine create --driver virtualbox serow</code></p></blockquote></li><li>参数<code>--driver</code>用于指定用来创建机器的驱动类型，这里是<code>virtualbox</code></li></ul><ol start="3"><li><p>查看机器的 ip</p><blockquote><p><code>$ docker-machine ip serow</code></p></blockquote></li><li><p>停止机器</p><blockquote><p><code>$ docker-machine stop serow</code></p></blockquote></li><li><p>启动机器*</p><blockquote><p><code>$ docker-machine start serow</code></p></blockquote></li><li><p>进入机器*</p><blockquote><p><code>$ docker-machine ssh serow</code></p></blockquote></li></ol><hr><p><strong>docker-machine 命令参数明细</strong></p><table><thead><tr><th align="left">命令</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left">docker-machine active</td><td align="left">用于查看当前激活状态的Docker主机</td></tr><tr><td align="left">config</td><td align="left">查看当前激活状态Docker主机的连接信息</td></tr><tr><td align="left">creat</td><td align="left">创建Docker主机</td></tr><tr><td align="left">env</td><td align="left">显示连接到某个主机需要的环境变量</td></tr><tr><td align="left">inspect</td><td align="left">以<code>json</code>格式输出指定Docker的详细信息</td></tr><tr><td align="left">ip</td><td align="left">获取指定 Docker 主机的地址</td></tr><tr><td align="left">kill</td><td align="left">直接杀死指定的 Docker主机</td></tr><tr><td align="left">ls</td><td align="left">列出所有的管理主机</td></tr><tr><td align="left">provision</td><td align="left">重新配置指定主机</td></tr><tr><td align="left">regenerate-certs</td><td align="left">为某个主机重新生成TLS信息</td></tr><tr><td align="left">restart</td><td align="left">重启指定的主机</td></tr><tr><td align="left">rm</td><td align="left">删除某台Docker主机，对应的虚拟机也会被删除</td></tr><tr><td align="left">ssh</td><td align="left">通过SSH连接到主机上，执行命令</td></tr><tr><td align="left">scp</td><td align="left">在Docker主机之间以及Docker主机和本地主机之间通过<code>scp</code>远程复制数据</td></tr><tr><td align="left">mount</td><td align="left">使用SSHFS从计算机装载或卸载目录</td></tr><tr><td align="left">start</td><td align="left">启动一个指定的Docker主机，如果对象是个虚拟机，该虚拟机将被启动</td></tr><tr><td align="left">status</td><td align="left">获取指定Docker主机的状态(包括:<code>Running</code>,<code>Paused</code>,<code>Saved</code>,<code>Stopped</code>,<code>Stopping</code>,<code>Starting</code>,<code>Error</code>)等</td></tr><tr><td align="left">stop</td><td align="left">停止一个指定的Docker主机</td></tr><tr><td align="left">upgrade</td><td align="left">将一个指定主机的Docker版本更新为最新</td></tr><tr><td align="left">url</td><td align="left">获取指定Docker主机的监听URL</td></tr><tr><td align="left">version</td><td align="left">显示 Docker Machine 的版本或者主机Docker版本</td></tr><tr><td align="left">help</td><td align="left">显示帮助信息</td></tr></tbody></table></div><footer class="post-footer"><div class="post-eof"></div></footer></div><div></div></article></section><nav class="pagination"><a class="extend prev" rel="prev" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="serow"><p class="site-author-name" itemprop="name">serow</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/%7C%7C%20archive"><span class="site-state-item-count">62</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">7</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">14</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Unit-serow" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i></a> </span><span class="links-of-author-item"><a href="mailto:unit.serow@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i></a> </span><span class="links-of-author-item"><a href="https://plus.google.com/unit.serow" target="_blank" title="Google"><i class="fa fa-fw fa-google"></i></a> </span><span class="links-of-author-item"><a href="https://user.qzone.qq.com/2721304117" target="_blank" title="QQ"><i class="fa fa-fw fa-qq"></i></a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 快捷链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.gnu.org/home.zh-cn.html/" title="GNU" target="_blank">GNU</a></li><li class="links-of-blogroll-item"><a href="https://www.debian.org/" title="Debian" target="_blank">Debian</a></li><li class="links-of-blogroll-item"><a href="https://www.centos.org/" title="CentOS" target="_blank">CentOS</a></li><li class="links-of-blogroll-item"><a href="https://www.gentoo.org/" title="Gentoo" target="_blank">Gentoo</a></li><li class="links-of-blogroll-item"><a href="https://en.wikipedia.org/Wiki/wiki" title="Wiki-EN" target="_blank">Wiki-EN</a></li><li class="links-of-blogroll-item"><a href="https://zh.wikipedia.org/wiki/Wiki" title="Wiki-CN" target="_blank">Wiki-CN</a></li><li class="links-of-blogroll-item"><a href="https://baike.baidu.com" title="百度百科" target="_blank">百度百科</a></li><li class="links-of-blogroll-item"><a href="https://www.gnu.org/prep/ftp.html" title="GNU 镜像源" target="_blank">GNU 镜像源</a></li><li class="links-of-blogroll-item"><a href="https://mirrors.cloud.tencent.com/" title="腾讯镜像源" target="_blank">腾讯镜像源</a></li><li class="links-of-blogroll-item"><a href="https://developer.aliyun.com/mirror/" title="阿里镜像源" target="_blank">阿里镜像源</a></li><li class="links-of-blogroll-item"><a href="https://mirrors.163.com/" title="网易镜像源" target="_blank">网易镜像源</a></li></ul></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">serow</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script></body></html><!-- rebuild by neat -->